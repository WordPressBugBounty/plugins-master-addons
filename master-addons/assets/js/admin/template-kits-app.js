/*! For license information please see template-kits-app.js.LICENSE.txt */
(()=>{"use strict";var e={1020(e,t,n){var r=n(6540),a=Symbol.for("react.element"),o=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,o={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)i.call(t,r)&&!l.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:a,type:e,key:c,ref:u,props:o,_owner:s.current}}t.Fragment=o,t.jsx=c,t.jsxs=c},4848(e,t,n){e.exports=n(1020)},5287(e,t){var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),f=Symbol.iterator;var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},h=Object.assign,v={};function y(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||m}function g(){}function b(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||m}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=y.prototype;var j=b.prototype=new g;j.constructor=b,h(j,y.prototype),j.isPureReactComponent=!0;var _=Array.isArray,w=Object.prototype.hasOwnProperty,x={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function N(e,t,r){var a,o={},i=null,s=null;if(null!=t)for(a in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(i=""+t.key),t)w.call(t,a)&&!k.hasOwnProperty(a)&&(o[a]=t[a]);var l=arguments.length-2;if(1===l)o.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];o.children=c}if(e&&e.defaultProps)for(a in l=e.defaultProps)void 0===o[a]&&(o[a]=l[a]);return{$$typeof:n,type:e,key:i,ref:s,props:o,_owner:x.current}}function T(e){return"object"==typeof e&&null!==e&&e.$$typeof===n}var S=/\/+/g;function O(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function C(e,t,a,o,i){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return i=i(l=e),e=""===o?"."+O(l,0):o,_(i)?(a="",null!=e&&(a=e.replace(S,"$&/")+"/"),C(i,t,a,"",function(e){return e})):null!=i&&(T(i)&&(i=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,a+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(S,"$&/")+"/")+e)),t.push(i)),1;if(l=0,o=""===o?".":o+":",_(e))for(var c=0;c<e.length;c++){var u=o+O(s=e[c],c);l+=C(s,t,a,u,i)}else if(u=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"==typeof u)for(e=u.call(e),c=0;!(s=e.next()).done;)l+=C(s=s.value,t,a,u=o+O(s,c++),i);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function P(e,t,n){if(null==e)return e;var r=[],a=0;return C(e,r,"","",function(e){return t.call(n,e,a++)}),r}function I(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var E={current:null},A={transition:null},F={ReactCurrentDispatcher:E,ReactCurrentBatchConfig:A,ReactCurrentOwner:x};function L(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:P,forEach:function(e,t,n){P(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return P(e,function(){t++}),t},toArray:function(e){return P(e,function(e){return e})||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=a,t.Profiler=i,t.PureComponent=b,t.StrictMode=o,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=F,t.act=L,t.cloneElement=function(e,t,r){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=h({},e.props),o=e.key,i=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(i=t.ref,s=x.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)w.call(t,c)&&!k.hasOwnProperty(c)&&(a[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)a.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];a.children=l}return{$$typeof:n,type:e.type,key:o,ref:i,props:a,_owner:s}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=N,t.createFactory=function(e){var t=N.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:p,_payload:{_status:-1,_result:e},_init:I}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=A.transition;A.transition={};try{e()}finally{A.transition=t}},t.unstable_act=L,t.useCallback=function(e,t){return E.current.useCallback(e,t)},t.useContext=function(e){return E.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return E.current.useDeferredValue(e)},t.useEffect=function(e,t){return E.current.useEffect(e,t)},t.useId=function(){return E.current.useId()},t.useImperativeHandle=function(e,t,n){return E.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return E.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return E.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return E.current.useMemo(e,t)},t.useReducer=function(e,t,n){return E.current.useReducer(e,t,n)},t.useRef=function(e){return E.current.useRef(e)},t.useState=function(e){return E.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return E.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return E.current.useTransition()},t.version="18.3.1"},6540(e,t,n){e.exports=n(5287)}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n(6540);const r=wp.element,a=wp.i18n;var o=n(4848);function i(){return(0,o.jsx)("div",{className:"scroll-icon",animate:{rotate:[0,-5,5,-5,0]},transition:{duration:1.5,repeat:1/0},children:(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",viewBox:"0 0 66 124",fillRule:"nonzero",strokeLinejoin:"round",strokeMiterlimit:"2",fill:"currentColor",stroke:"currentColor",strokeWidth:"2",children:(0,o.jsx)("path",{d:"M7 49v25.6c0 14 11.5 25.6 25.6 25.6s25.6-11.5 25.6-25.6V49c0-14-11.5-25.6-25.6-25.6S7 35 7 49zm25.6-20a20 20 0 0 1 19.9 20v25.6a20 20 0 0 1-19.9 19.9 20 20 0 0 1-19.9-19.9V49a20 20 0 0 1 19.9-19.9zm0 24.3c1.6 0 2.8-1.3 2.8-2.8V42c0-1.6-1.3-2.8-2.8-2.8s-2.8 1.3-2.8 2.8v8.5c0 1.6 1.3 2.8 2.8 2.8zm-2 68.7c.6.6 1.3 1 2 1s1.4-.3 2-1l7-7c1-1 1-2.8 0-4s-2.8-1-4 0l-5 5-5-5c-1-1-2.8-1-4 0s-1 2.8 0 4l7 7zm0-120.5l-7 7c-1 1-1 2.8 0 4 .6.6 1.3 1 2 1s1.4-.3 2-1l5-5 5 5c.6.6 1.3 1 2 1s1.4-.3 2-1c1-1 1-2.8 0-4l-7-7c-1-1-2.8-1-4 0z"})})})}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw a}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const c=function(e){var t=e.thumbnail,n=e.title,a=e.onPreview,l=(0,r.useRef)(null),c=(0,r.useRef)(null),u=s((0,r.useState)(0),2),d=u[0],p=u[1],f=s((0,r.useState)(!1),2),m=f[0],h=f[1],v=function(){var e;return(null===(e=window.JLTMATemplateLibrary)||void 0===e?void 0:e.pluginUrl)+"/assets/images/placeholder.png"};(0,r.useEffect)(function(){if(c.current){var e=function(){p(c.current.offsetHeight)};return c.current.addEventListener("load",e),window.addEventListener("resize",e),function(){c.current&&c.current.removeEventListener("load",e),window.removeEventListener("resize",e)}}},[]);var y=Math.max(0,d-200);return(0,o.jsxs)("div",{className:"template-preview",ref:l,onMouseEnter:function(){return h(!0)},onMouseLeave:function(){return h(!1)},onTouchStart:function(){return h(!0)},onTouchEnd:function(){return h(!1)},onClick:a,style:{cursor:"pointer"},children:[(0,o.jsx)("img",{ref:c,src:t||v(),alt:n,onError:function(e){e.target.src=v()},className:"template-image ".concat(m?"image-hovering":""),style:{"--translate-y":"".concat(-y,"px")}}),(0,o.jsx)(i,{})]})};const u=function(e){var t=e.template,n=e.parentTemplate||t;return n?n.purchasable?(0,o.jsx)("span",{className:"purchase-badge",children:"PURCHASE"}):n.is_pro?(0,o.jsx)("span",{className:"pro-badge",children:"PRO"}):(0,o.jsx)("span",{className:"free-badge",children:"FREE"}):null};var d="jltma_favorites",p=function(){try{!function(){try{var e=localStorage.getItem(d);if(!e)return;var t=JSON.parse(e);if(Array.isArray(t)){var n={library:t,kits:[]};localStorage.setItem(d,JSON.stringify(n))}}catch(e){console.error("Error migrating favorites:",e)}}();var e=localStorage.getItem(d);return e?JSON.parse(e):{library:[],kits:[]}}catch(e){return console.error("Error getting favorites:",e),{library:[],kits:[]}}},f=function(e){return p()[e]||[]},m=function(e,t){try{var n=p(),r=n[t]||[];return!r.includes(e)&&(r.push(e),n[t]=r,localStorage.setItem(d,JSON.stringify(n)),window.dispatchEvent(new CustomEvent("jltma-favorites-updated",{detail:{templateType:t,action:"add",templateId:e}})),!0)}catch(e){return console.error("Error adding favorite:",e),!1}},h=function(e,t){try{var n=p(),r=(n[t]||[]).filter(function(t){return t!==e});return n[t]=r,localStorage.setItem(d,JSON.stringify(n)),window.dispatchEvent(new CustomEvent("jltma-favorites-updated",{detail:{templateType:t,action:"remove",templateId:e}})),!0}catch(e){return console.error("Error removing favorite:",e),!1}};function v(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,r,a,o){var l=r&&r.prototype instanceof s?r:s,c=Object.create(l.prototype);return y(c,"_invoke",function(n,r,a){var o,s,l,c=0,u=a||[],d=!1,p={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return o=t,s=0,l=e,p.n=n,i}};function f(n,r){for(s=n,l=r,t=0;!d&&c&&!a&&t<u.length;t++){var a,o=u[t],f=p.p,m=o[2];n>3?(a=m===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=f&&((a=n<2&&f<o[1])?(s=0,p.v=r,p.n=o[1]):f<m&&(a=n<3||o[0]>r||r>m)&&(o[4]=n,o[5]=r,p.n=m,s=0))}if(a||n>1)return i;throw d=!0,r}return function(a,u,m){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&f(u,m),s=u,l=m;(t=s<2?e:l)||!d;){o||(s?s<3?(s>1&&(p.n=-1),f(s,l)):p.n=l:p.v=l);try{if(c=2,o){if(s||(a="next"),t=o[a]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),s=1);o=e}else if((t=(d=p.n<0)?l:n.call(r,p))!==i)break}catch(t){o=e,s=1,l=t}finally{c=1}}return{value:t,done:d}}}(n,a,o),!0),c}var i={};function s(){}function l(){}function c(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(y(t={},r,function(){return this}),t),d=c.prototype=s.prototype=Object.create(u);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,y(e,a,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=c,y(d,"constructor",c),y(c,"constructor",l),l.displayName="GeneratorFunction",y(c,a,"GeneratorFunction"),y(d),y(d,a,"Generator"),y(d,r,function(){return this}),y(d,"toString",function(){return"[object Generator]"}),(v=function(){return{w:o,m:p}})()}function y(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}y=function(e,t,n,r){function o(t,n){y(e,t,function(e){return this._invoke(t,n,e)})}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(o("next",0),o("throw",1),o("return",2))},y(e,t,n,r)}function g(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function b(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){g(o,r,a,i,s,"next",e)}function s(e){g(o,r,a,i,s,"throw",e)}i(void 0)})}}function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw a}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return _(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const w=function(e){var t=e.templateId,n=e.templateType,i=void 0===n?"library":n,s=j((0,r.useState)(!1),2),l=s[0],c=s[1],u=j((0,r.useState)(0),2),d=u[0],p=u[1];(0,r.useEffect)(function(){var e=function(e,t){return f(t).includes(e)}(t,i);c(e)},[t,i]),(0,r.useEffect)(function(){var e=function(){var e=b(v().m(function e(){var n,r,a;return v().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,fetch("https://el.master-addons.com/wp-json/jltma/v1/favorites/counts?template_ids=".concat(t));case 1:if(!(n=e.v).ok){e.n=3;break}return e.n=2,n.json();case 2:(r=e.v).success&&r.counts&&r.counts[t]&&p(r.counts[t]);case 3:e.n=5;break;case 4:e.p=4,a=e.v,console.error("Error fetching favorite count:",a);case 5:return e.a(2)}},e,null,[[0,4]])}));return function(){return e.apply(this,arguments)}}();e()},[t]);var y=function(){var e=b(v().m(function e(){return v().w(function(e){for(;;)switch(e.n){case 0:if(!l){e.n=2;break}if(!h(t,i)){e.n=1;break}return c(!1),p(function(e){return Math.max(0,e-1)}),e.n=1,g(t,!1,i);case 1:e.n=3;break;case 2:if(!m(t,i)){e.n=3;break}return c(!0),p(function(e){return e+1}),e.n=3,g(t,!0,i);case 3:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),g=function(){var e=b(v().m(function e(t,n,r){var a,o;return v().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,fetch("https://el.master-addons.com/wp-json/jltma/v1/favorites",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({template_id:t,action:n?"add":"remove",template_type:r,user_id:(null===(a=window.JLTMATemplateLibrary)||void 0===a?void 0:a.userId)||"guest",site_url:window.location.hostname})});case 1:e.v.ok||console.warn("Failed to sync favorite to API"),e.n=3;break;case 2:e.p=2,o=e.v,console.error("Error syncing favorite to API:",o);case 3:return e.a(2)}},e,null,[[0,2]])}));return function(t,n,r){return e.apply(this,arguments)}}();return(0,o.jsx)("button",{className:"template-favorite-btn ".concat(l?"is-favorite":""," has-tooltip"),onClick:y,title:l?(0,a.__)("Remove from favorites","master-addons"):(0,a.__)("Add to favorites","master-addons"),"aria-label":l?(0,a.__)("Remove from favorites","master-addons"):(0,a.__)("Add to favorites","master-addons"),"data-tooltip":d>0?"Loved by ".concat(d," ").concat(1===d?"user":"users"):l?"Click to remove from favorites":"Click to add to favorites",children:(0,o.jsx)("span",{className:l?"eicon-heart":"eicon-heart-o"})})};const x=function(e){var t,n=e.template,r=e.parentTemplate,i=e.mode,s=e.isProUser,l=e.isImporting,c=e.onPreview,u=e.onImport,d=e.onOpenKit,p=e.onPageImportModeImport,f="kits"===i&&!(null!=n&&n.type),m="kits"===i&&(null==n?void 0:n.type),h=m?null==r?void 0:r.purchasable:null==n?void 0:n.purchasable,v=m?null==r?void 0:r.purchase_url:null==n?void 0:n.purchase_url,y=(null==r?void 0:r.is_pro)||(null==n?void 0:n.is_pro),g=!0===window.JLTMA_IS_PAGE_IMPORTER_MODE;t="library"===i?!!l:"kits"===i&&(!!m&&!!l[n.template_id]);var b=[];if(f&&!g&&b.push((0,o.jsxs)("button",{className:"template-view-btn",onClick:function(){return d(n,n.categories[0])},children:[(0,o.jsx)("span",{className:"dashicons dashicons-plus-alt"}),(0,a.__)("View Kit","master-addons")]},"view-kit")),!g&&null!=n&&n.preview_url&&b.push((0,o.jsxs)("button",{className:"template-preview-btn",onClick:c,children:[(0,o.jsx)("span",{className:"eicon-preview-medium"}),(0,a.__)("Preview","master-addons")]},"preview")),f&&g&&b.push((0,o.jsx)("button",{className:"template-view-btn",onClick:function(){return d(n,n.categories[0])},children:(0,a.__)("View & Insert Kit","master-addons")},"view-kit")),!f)if(h)b.push((0,o.jsxs)("button",{className:"template-purchase-btn",onClick:function(){return window.open(v||"#","_blank")},children:[(0,o.jsx)("span",{className:"eicon-product-add-to-cart"}),(0,a.__)("Purchase","master-addons")]},"purchase"));else if(y&&!s)b.push((0,o.jsx)("button",{className:"upgrade-to-pro",onClick:function(){return window.open("https://master-addons.com/pricing","_blank")},children:(0,a.__)("Upgrade to PRO","master-addons")},"upgrade"));else if(g){var j=(0,a.__)("View & Insert","master-addons"),_=(0,a.__)("Inserting...","master-addons");b.push((0,o.jsx)("button",{className:"template-import-btn",onClick:function(){return p()},disabled:t,title:j,children:t?_:j},"import"))}else{var w=(0,a.__)((0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("span",{className:"dashicons dashicons-plus-alt"}),(0,a.__)("Import","master-addons")]})),x=(0,a.__)((0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("span",{className:"dashicons dashicons-plus-alt"}),(0,a.__)("Importing...","master-addons")]}));b.push((0,o.jsx)("button",{className:"template-import-btn",onClick:u,disabled:t,title:w,children:t?x:w},"import"))}return(0,o.jsx)("div",{className:"template-actions",children:b})};function k(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,r,a,o){var l=r&&r.prototype instanceof s?r:s,c=Object.create(l.prototype);return N(c,"_invoke",function(n,r,a){var o,s,l,c=0,u=a||[],d=!1,p={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return o=t,s=0,l=e,p.n=n,i}};function f(n,r){for(s=n,l=r,t=0;!d&&c&&!a&&t<u.length;t++){var a,o=u[t],f=p.p,m=o[2];n>3?(a=m===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=f&&((a=n<2&&f<o[1])?(s=0,p.v=r,p.n=o[1]):f<m&&(a=n<3||o[0]>r||r>m)&&(o[4]=n,o[5]=r,p.n=m,s=0))}if(a||n>1)return i;throw d=!0,r}return function(a,u,m){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&f(u,m),s=u,l=m;(t=s<2?e:l)||!d;){o||(s?s<3?(s>1&&(p.n=-1),f(s,l)):p.n=l:p.v=l);try{if(c=2,o){if(s||(a="next"),t=o[a]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),s=1);o=e}else if((t=(d=p.n<0)?l:n.call(r,p))!==i)break}catch(t){o=e,s=1,l=t}finally{c=1}}return{value:t,done:d}}}(n,a,o),!0),c}var i={};function s(){}function l(){}function c(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(N(t={},r,function(){return this}),t),d=c.prototype=s.prototype=Object.create(u);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,N(e,a,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=c,N(d,"constructor",c),N(c,"constructor",l),l.displayName="GeneratorFunction",N(c,a,"GeneratorFunction"),N(d),N(d,a,"Generator"),N(d,r,function(){return this}),N(d,"toString",function(){return"[object Generator]"}),(k=function(){return{w:o,m:p}})()}function N(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}N=function(e,t,n,r){function o(t,n){N(e,t,function(e){return this._invoke(t,n,e)})}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(o("next",0),o("throw",1),o("return",2))},N(e,t,n,r)}function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach(function(t){O(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function O(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=C(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=C(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==C(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function P(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function I(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){P(o,r,a,i,s,"next",e)}function s(e){P(o,r,a,i,s,"throw",e)}i(void 0)})}}const E=function(e){var t,n,r,i,s=e.template,l=e.onImport,d=e.onPreview,p=e.onOpenKit,f=e.mode,m=e.parentTemplate,h=e.isImporting,v=(e.setIsImporting,e.isProUser),y=(e.requiredPlugins,e.pluginStatuses,"kits"===f?"kits":"library");m&&(s.is_pro=m.is_pro);var g;m||(s.thumbnail&&""!==s.thumbnail||(s.thumbnail=null===(g=s.manifest)||void 0===g?void 0:g.templates[0].screenshot));var b=m&&m.categories&&m.categories.includes("purchased"),j=!m&&s.categories&&s.categories.includes("purchased"),_=function(){return!0},N=function(){var e=I(k().m(function e(){var t,n,r,o=arguments;return k().w(function(e){for(;;)switch(e.p=e.n){case 0:if("object"===C(t=o.length>0&&void 0!==o[0]?o[0]:null)&&(t=s.title),"kits"!==f||_()){e.n=1;break}return alert((0,a.__)("Please install and activate all required plugins before importing this template.","master-addons")),e.a(2);case 1:return e.p=1,n=t?S(S({},s),{},{page_name:t}):s,e.n=2,l(n);case 2:e.n=4;break;case 3:e.p=3,r=e.v,window.swal({title:"Import Failed",text:"An error occurred during template import: ".concat(r.message),icon:"error",confirmButtonColor:"#d33",confirmButtonText:"OK"});case 4:return e.a(2)}},e,null,[[1,3]])}));return function(){return e.apply(this,arguments)}}(),T=function(){var e=I(k().m(function e(){var t;return k().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,l(s,m.kit_id.split("-").slice(-1)[0]);case 1:e.n=3;break;case 2:e.p=2,t=e.v,window.swal({title:"Import Failed",text:"An error occurred during kit import: ".concat(t.message),icon:"error",confirmButtonColor:"#d33",confirmButtonText:"OK"});case 3:return e.a(2)}},e,null,[[0,2]])}));return function(){return e.apply(this,arguments)}}(),O=function(){"kits"===f?j||b?j&&s.preview_url?window.open(s.preview_url,"_blank"):b&&m.preview_url&&window.open(m.preview_url,"_blank"):d(m?m.kit_id:s.kit_id):d(s)};return(0,o.jsxs)("div",{className:"template-item item-".concat(null!==(t=null==s?void 0:s.template_id)&&void 0!==t?t:s.kit_id),"data-key":null!==(r=null==s?void 0:s.template_id)&&void 0!==r?r:s.kit_id,children:[(0,o.jsx)(c,{thumbnail:s.thumbnail,title:s.title||s.kit_name,onPreview:O}),(0,o.jsxs)("div",{className:"template-info",children:[(0,o.jsxs)("div",{className:"template-title",children:[(0,o.jsxs)("h3",{children:[null!==(i=s.title)&&void 0!==i?i:s.kit_name,!j&&(0,o.jsx)(w,{templateId:s.id||s.template_id||s.kit_id,templateType:y})]}),(0,o.jsx)(u,{template:s,parentTemplate:m})]}),(0,o.jsx)(x,{template:s,parentTemplate:m,mode:f,isProUser:v,isImporting:h,onPreview:O,onImport:"kits"===f&&null!=s&&s.type?T:N,onOpenKit:p,onPageImportModeImport:function(){d(s)}})]})]},null!==(n=null==s?void 0:s.template_id)&&void 0!==n?n:s.kit_id)};const A=function(e){var t=e.currentPage,n=e.totalPages,r=e.totalItems,i=e.perPage,s=e.onPageChange,l=e.loading,c=void 0!==l&&l;if(n<=1)return null;var u=function(e){e===t||"..."===e||c||s(e)},d={start:(t-1)*i+1,end:Math.min(t*i,r)},p=d.start,f=d.end,m=function(){var e=[];if(n<=7)for(var r=1;r<=n;r++)e.push(r);else if(t<=4){for(var a=1;a<=5;a++)e.push(a);e.push("..."),e.push(n)}else if(t>=n-3){e.push(1),e.push("...");for(var o=n-4;o<=n;o++)e.push(o)}else e.push(1),e.push("..."),e.push(t-1),e.push(t),e.push(t+1),e.push("..."),e.push(n);return e}();return(0,o.jsxs)("div",{className:"template-pagination",children:[(0,o.jsxs)("div",{className:"pagination-controls",children:[(0,o.jsxs)("button",{className:"pagination-btn pagination-prev ".concat(1===t?"disabled":""),onClick:function(){return u(t-1)},disabled:1===t||c,title:(0,a.__)("Previous Page","master-addons"),children:[(0,o.jsx)("span",{className:"dashicons dashicons-arrow-left-alt2"}),(0,a.__)("Previous","master-addons")]}),(0,o.jsx)("div",{className:"pagination-numbers",children:m.map(function(e,n){return"..."===e?(0,o.jsx)("span",{className:"pagination-ellipsis",children:"..."},"ellipsis-".concat(n)):(0,o.jsx)("button",{className:"pagination-number ".concat(e===t?"active":""),onClick:function(){return u(e)},disabled:c,children:e},e)})}),(0,o.jsxs)("button",{className:"pagination-btn pagination-next ".concat(t===n?"disabled":""),onClick:function(){return u(t+1)},disabled:t===n||c,title:(0,a.__)("Next Page","master-addons"),children:[(0,a.__)("Next","master-addons"),(0,o.jsx)("span",{className:"dashicons dashicons-arrow-right-alt2"})]})]}),(0,o.jsx)("div",{className:"pagination-info",children:(0,o.jsxs)("span",{className:"pagination-text",children:[(0,a.__)("Showing","master-addons")," ",p,"-",f," ",(0,a.__)("of","master-addons")," ",r," ",(0,a.__)("templates","master-addons")]})}),c&&(0,o.jsx)("div",{className:"pagination-loading",children:(0,o.jsxs)("div",{className:"pagination-spinner",children:[(0,o.jsx)("span",{className:"dashicons dashicons-update spinning"}),(0,o.jsx)("span",{className:"loading-text",children:(0,a.__)("Loading templates...","master-addons")})]})})]})};const F=function(e){var t=e.className,n=void 0===t?"":t,a=e.open,i=e.setIsOpen,s=e.children,l=(0,r.useRef)(null),c=(0,r.useRef)(null);return(0,r.useEffect)(function(){var e=l.current;e&&(a?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200;e.style.display="flex",e.style.pointerEvents="auto";var n=0,r=16/t,a=function(){(n+=r)>=1&&(n=1),e.style.opacity=n,n<1&&requestAnimationFrame(a)};requestAnimationFrame(a)}(e):function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,n=1;e.style.pointerEvents="none";var r=16/t,a=function(){(n-=r)<=0&&(n=0,e.style.display="none"),e.style.opacity=n,n>0&&requestAnimationFrame(a)};requestAnimationFrame(a)}(e))},[a]),(0,r.useEffect)(function(){var e=function(e){if(a){var t=l.current,n=c.current,r=document.querySelector(".swal2-container.fade.in");t&&n&&!n.contains(e.target)&&!r&&i(!1)}};return document.addEventListener("mousedown",e),function(){return document.removeEventListener("mousedown",e)}},[a,i]),(0,r.useEffect)(function(){var e=function(e){"Escape"===e.key&&a&&(document.querySelector(".swal2-container.fade.in")||i(!1))};return document.addEventListener("keydown",e),function(){return document.removeEventListener("keydown",e)}},[a,i]),(0,r.useEffect)(function(){var e=function(e){e.target.matches(".swal2-confirm.styled")&&i(!1)};return document.addEventListener("click",e),function(){return document.removeEventListener("click",e)}},[i]),(0,o.jsxs)("div",{ref:l,className:"template-importer-modal ".concat(n),style:{display:"none",opacity:0},children:[(0,o.jsx)("div",{className:"modal-overlay"}),(0,o.jsx)("div",{ref:c,className:"modal-content",children:s})]})};function L(e){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L(e)}function M(e){if(null!=e){var t=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}throw new TypeError(L(e)+" is not iterable")}function B(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,r,a,o){var l=r&&r.prototype instanceof s?r:s,c=Object.create(l.prototype);return G(c,"_invoke",function(n,r,a){var o,s,l,c=0,u=a||[],d=!1,p={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return o=t,s=0,l=e,p.n=n,i}};function f(n,r){for(s=n,l=r,t=0;!d&&c&&!a&&t<u.length;t++){var a,o=u[t],f=p.p,m=o[2];n>3?(a=m===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=f&&((a=n<2&&f<o[1])?(s=0,p.v=r,p.n=o[1]):f<m&&(a=n<3||o[0]>r||r>m)&&(o[4]=n,o[5]=r,p.n=m,s=0))}if(a||n>1)return i;throw d=!0,r}return function(a,u,m){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&f(u,m),s=u,l=m;(t=s<2?e:l)||!d;){o||(s?s<3?(s>1&&(p.n=-1),f(s,l)):p.n=l:p.v=l);try{if(c=2,o){if(s||(a="next"),t=o[a]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),s=1);o=e}else if((t=(d=p.n<0)?l:n.call(r,p))!==i)break}catch(t){o=e,s=1,l=t}finally{c=1}}return{value:t,done:d}}}(n,a,o),!0),c}var i={};function s(){}function l(){}function c(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(G(t={},r,function(){return this}),t),d=c.prototype=s.prototype=Object.create(u);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,G(e,a,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=c,G(d,"constructor",c),G(c,"constructor",l),l.displayName="GeneratorFunction",G(c,a,"GeneratorFunction"),G(d),G(d,a,"Generator"),G(d,r,function(){return this}),G(d,"toString",function(){return"[object Generator]"}),(B=function(){return{w:o,m:p}})()}function G(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}G=function(e,t,n,r){function o(t,n){G(e,t,function(e){return this._invoke(t,n,e)})}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(o("next",0),o("throw",1),o("return",2))},G(e,t,n,r)}function R(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=U(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function D(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function K(e){return function(e){if(Array.isArray(e))return $(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||U(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw a}}return s}}(e,t)||U(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e,t){if(e){if("string"==typeof e)return $(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$(e,t):void 0}}function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const J=function(e){var t=e.templates,n=e.loading,i=e.onImport,s=e.onPreview,l=e.onOpenKit,c=e.pagination,u=e.onPageChange,d=e.loadingPage,p=e.mode,f=e.parentTemplate,m=e.isImporting,h=e.setIsImporting,v=e.isProUser,y=e.pluginStatuses,g=e.setPluginStatuses,b=e.onInstallPlugin,j=e.onActivatePlugin,_=e.requiredPlugins,w=void 0===_?[]:_,x=!0===window.JLTMA_IS_PAGE_IMPORTER_MODE,k="kits"===p&&(null==t?void 0:t.required_plugins),N=q((0,r.useState)(!1),2),T=N[0],S=N[1],O=q((0,r.useState)([]),2),C=O[0],P=O[1],I=q((0,r.useState)(!1),2),L=I[0],G=I[1],U=(0,r.useRef)(null),$=t;(0,r.useEffect)(function(){if(k&&g&&w.length>0){var e={};w.forEach(function(t){e[t.slug]={is_installed:t.is_installed,is_active:t.is_active}}),g(e);var t=w.filter(function(e){return!e.is_active}).map(function(e){return e.slug});P(t)}},[t,g,k]);var J=function(){var e,t=(e=B().m(function e(){var t,n,r,a;return B().w(function(e){for(;;)switch(e.p=e.n){case 0:if(0!==C.length){e.n=1;break}return e.a(2);case 1:G(!0),t=R(C),e.p=2,r=B().m(function e(){var t,r,a;return B().w(function(e){for(;;)switch(e.n){case 0:if(t=n.value,r=w.find(function(e){return e.slug===t}),(a=y[t]||r).is_active){e.n=3;break}if(a.is_installed){e.n=2;break}return e.n=1,b(r);case 1:e.n=3;break;case 2:return e.n=3,j(r);case 3:return e.a(2)}},e)}),t.s();case 3:if((n=t.n()).done){e.n=5;break}return e.d(M(r()),4);case 4:e.n=3;break;case 5:e.n=7;break;case 6:e.p=6,a=e.v,t.e(a);case 7:return e.p=7,t.f(),e.f(7);case 8:G(!1),S(!1);case 9:return e.a(2)}},e,null,[[2,6,7,8]])}),function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){D(o,r,a,i,s,"next",e)}function s(e){D(o,r,a,i,s,"throw",e)}i(void 0)})});return function(){return t.apply(this,arguments)}}();return(0,r.useEffect)(function(){if(x&&f&&!n&&$&&$.length>0){var e=setTimeout(function(){var e=document.querySelector(".templates-grid");if(e&&window.Macy){U.current&&U.current.remove(),U.current=window.Macy({container:".templates-grid",columns:3,margin:{x:20,y:20},breakAt:{1200:3,940:2,520:1},waitForImages:!0,trueOrder:!1});var t=function(){U.current&&U.current.recalculate(!0)};setTimeout(t,100),setTimeout(t,300),setTimeout(t,500),setTimeout(t,1e3);var n=e.querySelectorAll("img");n.length>0&&n.forEach(function(e){e.complete||e.addEventListener("load",t)})}},300);return function(){clearTimeout(e),U.current&&(U.current.remove(),U.current=null)}}},[x,n,$,f]),n?(0,o.jsx)("div",{className:"templates-grid-container",children:(0,o.jsxs)("div",{className:"loading-templates",children:[(0,o.jsx)("div",{className:"loading-templates-logo",children:(0,o.jsx)("img",{src:"".concat(window.JLTMATemplateLibrary.pluginUrl,"/assets/images/logo.svg"),alt:"Master Addons",className:"ma-el-loading-logo"})}),(0,o.jsxs)("div",{className:"loading-templates-title",children:["Loading Template ","kits"===p?"Kits..":"Library..","."]})]})}):n||$&&(!Array.isArray($)||0!==$.length)?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"templates-grid-container",children:[(null==w?void 0:w.length)>0&&f&&w.some(function(e){var t;return!(null!==(t=y[e.slug])&&void 0!==t&&t.is_active||e.is_active)})&&(0,o.jsx)("div",{className:"required-plugins",children:(0,o.jsxs)("div",{className:"required-plugins-header",children:[(0,o.jsx)("div",{className:"header-left",children:(0,a.__)((0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("strong",{children:"Attention!"})," There are"," ",w.filter(function(e){var t;return!(null!==(t=y[e.slug])&&void 0!==t&&t.is_active||e.is_active)}).length," ","requirements that need installing for this Template Kit to work correctly."]}),"master-addons")}),(0,o.jsx)("div",{className:"header-right",children:(0,o.jsxs)("button",{className:"install_missing_requirement",onClick:function(){return S(!0)},children:[(0,o.jsx)("span",{className:"dashicons dashicons-info"}),(0,a.__)("Install Requirements","master-addons")]})})]})}),(0,o.jsxs)(F,{open:T,setIsOpen:S,className:"required-plugins-modal",children:[(0,o.jsxs)("div",{className:"modal-header",children:[(0,o.jsx)("h3",{children:(0,a.__)("Required Plugins","master-addons")}),(0,o.jsx)("button",{className:"modal-close",onClick:function(){return S(!1)},disabled:L,"aria-label":(0,a.__)("Close","master-addons"),children:(0,o.jsx)("span",{className:"dashicons dashicons-no-alt"})})]}),(0,o.jsxs)("div",{className:"modal-body",children:[(0,o.jsx)("p",{className:"modal-description",children:(0,a.__)("Please install and activate these required plugins for this Template Kit to work perfectly","master-addons")}),(0,o.jsx)("div",{className:"required-plugins-list",children:null==w?void 0:w.map(function(e){var t=y[null==e?void 0:e.slug]||e,n=null==t?void 0:t.is_active,r=C.includes(null==e?void 0:e.slug);return(0,o.jsxs)("label",{className:"required-plugin-item ".concat(n?"active":""),children:[(0,o.jsxs)("div",{className:"plugin-checkbox-label",children:[n?(0,o.jsx)("span",{className:"active-plugin-checkmark",children:(0,o.jsx)("span",{className:"dashicons dashicons-yes-alt",style:{color:"#4CAF50"}})}):(0,o.jsx)("input",{type:"checkbox",checked:r,onChange:function(){return t=null==e?void 0:e.slug,void P(function(e){return e.includes(t)?e.filter(function(e){return e!==t}):[].concat(K(e),[t])});var t},disabled:L}),(0,o.jsxs)("div",{className:"plugin-info",children:[(0,o.jsx)("span",{className:"plugin-name",children:null==e?void 0:e.name}),(null==e?void 0:e.version)&&(0,o.jsx)("span",{className:"plugin-version",children:null==e?void 0:e.version})]})]}),(0,o.jsxs)("div",{className:"plugin-status",children:[n&&(0,o.jsxs)("span",{className:"status-active",children:[(0,o.jsx)("span",{className:"dashicons dashicons-yes-alt"}),(0,a.__)("Active","master-addons")]}),!n&&(null==t?void 0:t.is_installed)&&(0,o.jsx)("span",{className:"status-installed",children:(0,a.__)("Installed but not activated ","master-addons")}),!n&&!(null!=t&&t.is_installed)&&(0,o.jsx)("span",{className:"status-not-installed",children:(0,a.__)("Not installed","master-addons")})]})]},null==e?void 0:e.slug)})}),(0,o.jsx)("div",{className:"modal-footer",children:(0,o.jsxs)("button",{className:"button button-primary install-selected-btn",onClick:J,disabled:0===C.length||L,children:[(0,o.jsx)("span",{className:"dashicons dashicons-download"}),L?(0,a.__)("Installing...","master-addons"):0===C.length?(0,a.__)("Select plugins to install","master-addons"):(0,a.__)("Install Above Selected Requirements","master-addons")]})})]})]}),(0,o.jsx)("div",{className:"templates-grid",children:$.map(function(e){var t;return(0,o.jsx)(E,{template:e,onImport:i,onPreview:s,onOpenKit:l,mode:p,isProUser:v,parentTemplate:f,isImporting:m,setIsImporting:h,requiredPlugins:w,pluginStatuses:y},null!==(t=null==e?void 0:e.template_id)&&void 0!==t?t:null==e?void 0:e.kit_id)})})]}),c&&!f&&!x&&(0,o.jsx)(A,{currentPage:c.current_page,totalPages:c.total_pages,totalItems:c.total_items,perPage:12,onPageChange:u,loading:d||!1})]}):(0,o.jsx)("div",{className:"templates-grid-container",children:(0,o.jsxs)("div",{className:"no-templates",children:[(0,o.jsx)("h3",{children:(0,a.__)("No Templates Found","master-addons")}),(0,o.jsx)("p",{children:(0,a.__)("Try adjusting your search or selecting a different category.","master-addons")})]})})};function z(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,r,a,o){var l=r&&r.prototype instanceof s?r:s,c=Object.create(l.prototype);return W(c,"_invoke",function(n,r,a){var o,s,l,c=0,u=a||[],d=!1,p={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return o=t,s=0,l=e,p.n=n,i}};function f(n,r){for(s=n,l=r,t=0;!d&&c&&!a&&t<u.length;t++){var a,o=u[t],f=p.p,m=o[2];n>3?(a=m===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=f&&((a=n<2&&f<o[1])?(s=0,p.v=r,p.n=o[1]):f<m&&(a=n<3||o[0]>r||r>m)&&(o[4]=n,o[5]=r,p.n=m,s=0))}if(a||n>1)return i;throw d=!0,r}return function(a,u,m){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&f(u,m),s=u,l=m;(t=s<2?e:l)||!d;){o||(s?s<3?(s>1&&(p.n=-1),f(s,l)):p.n=l:p.v=l);try{if(c=2,o){if(s||(a="next"),t=o[a]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),s=1);o=e}else if((t=(d=p.n<0)?l:n.call(r,p))!==i)break}catch(t){o=e,s=1,l=t}finally{c=1}}return{value:t,done:d}}}(n,a,o),!0),c}var i={};function s(){}function l(){}function c(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(W(t={},r,function(){return this}),t),d=c.prototype=s.prototype=Object.create(u);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,W(e,a,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=c,W(d,"constructor",c),W(c,"constructor",l),l.displayName="GeneratorFunction",W(c,a,"GeneratorFunction"),W(d),W(d,a,"Generator"),W(d,r,function(){return this}),W(d,"toString",function(){return"[object Generator]"}),(z=function(){return{w:o,m:p}})()}function W(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}W=function(e,t,n,r){function o(t,n){W(e,t,function(e){return this._invoke(t,n,e)})}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(o("next",0),o("throw",1),o("return",2))},W(e,t,n,r)}function V(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function H(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){V(o,r,a,i,s,"next",e)}function s(e){V(o,r,a,i,s,"throw",e)}i(void 0)})}}const Y=function(e){var t=e.parentTemplate,n=e.mode,r=e.templates,i=void 0===r?[]:r,s=e.onImport,l=e.onFullKitImport,c=e.isImporting,u=(e.setIsImporting,e.isProUser),d=(e.requiredPlugins,e.pluginStatuses,function(){var e=H(z().m(function e(n){var r;return z().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,s(n,t.kit_id);case 1:e.n=3;break;case 2:e.p=2,r=e.v,console.error("Import failed:",r,"template",n);case 3:return e.p=3,e.f(3);case 4:return e.a(2)}},e,null,[[0,2,3,4]])}));return function(t){return e.apply(this,arguments)}}()),p=function(){var e=H(z().m(function e(){var t,n,r,a;return z().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!l){e.n=1;break}return l(),e.a(2);case 1:if(0!==(t=i.templates.filter(function(e){return e&&e.template_id})).length){e.n=2;break}return e.a(2);case 2:return n={},t.forEach(function(e){n[e.template_id]=!0}),e.n=3,new Promise(function(e){return setTimeout(e,100)});case 3:r=0;case 4:if(!(r<t.length)){e.n=10;break}return a=t[r],e.p=5,e.n=6,d(a);case 6:return e.n=7,new Promise(function(e){return setTimeout(e,1500)});case 7:e.n=9;break;case 8:e.p=8,e.v;case 9:r++,e.n=4;break;case 10:return e.a(2)}},e,null,[[5,8]])}));return function(){return e.apply(this,arguments)}}();return(0,o.jsxs)("div",{className:"kit-template-grid-footer",children:["kits"===n&&t&&(0,o.jsx)("div",{className:"template-details",children:t.descriptions||""}),"kits"===n&&t&&function(){var e=t.purchasable,n=t.is_pro,r=!e&&(!n||u);if(e)return(0,o.jsxs)("div",{className:"footer-message-section",children:[(0,o.jsx)("span",{className:"purchase-notice",children:(0,a.__)("Purchase to use this layout","master-addons")}),(0,o.jsx)("button",{className:"template-purchase-btn",onClick:function(){return window.open(t.purchase_url||"#","_blank")},children:(0,a.__)("Purchase","master-addons")})]});if(n&&!u)return(0,o.jsxs)("div",{className:"footer-message-section",children:[(0,o.jsx)("span",{className:"upgrade-pro-notice",children:(0,a.__)("Upgrade to PRO to use this layout","master-addons")}),(0,o.jsx)("button",{className:"upgrade-to-pro",onClick:function(){return window.open("https://master-addons.com/pricing","_blank")},children:(0,a.__)("Upgrade to PRO","master-addons")})]});if(r){var i=!1;return(0,o.jsxs)("div",{className:"footer-message-section",children:[(0,o.jsx)("span",{className:"insert-all-notice",children:(0,a.__)("Import all templates from this kit","master-addons")}),(0,o.jsx)("button",{className:"insert-all-btn ".concat(""),onClick:function(){return p()},disabled:Object.keys(c).length>0||i,title:(0,a.__)("Import all templates from this kit","master-addons"),children:Object.keys(c).length>0?(0,a.__)("Importing...","master-addons"):(0,a.__)("Import All Templates","master-addons")})]})}return null}()]})};const Z=function(e){var t=e.activeTab,n=e.onTabChange,r=e.templateCounts,i=e.tabs,s=void 0===i?[]:i,l=[{id:"master_pages",label:(0,a.__)("Pages","master-addons"),icon:"dashicons-admin-page"},{id:"master_section",label:(0,a.__)("Sections","master-addons"),icon:"dashicons-layout"},{id:"master_footers",label:(0,a.__)("Footer","master-addons"),icon:"dashicons-table-row-after"},{id:"master_headers",label:(0,a.__)("Headers","master-addons"),icon:"dashicons-table-row-before"}],c=s.length>0?s:l;return(0,o.jsx)("div",{className:"template-tabs",children:c.map(function(e){return(0,o.jsxs)("button",{className:"template-tab ".concat(t===e.id?"active":""),onClick:function(){return n(e.id)},children:[(0,o.jsx)("span",{className:"dashicons ".concat(e.icon)}),(0,o.jsx)("span",{className:"tab-label",children:e.label}),void 0!==r[e.id]&&(0,o.jsxs)("span",{className:"tab-count",children:["(",r[e.id],")"]})]},e.id)})})};function X(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw a}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Q(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Q(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const ee=function(e){var t=e.categoryName,n=e.categories,a=e.activeCategory,i=e.onCategoryChange,s=X((0,r.useState)(!1),2),l=s[0],c=s[1],u=(0,r.useRef)(null);return(0,r.useEffect)(function(){document.addEventListener("mousedown",function(e){u.current&&!u.current.contains(e.target)&&c(!1)})},[l,c]),(0,o.jsxs)("div",{className:"template-library-categories",ref:u,children:[(0,o.jsxs)("button",{type:"button",className:"template-library-select-category",onClick:function(){return c(!l)},children:[t||"Categories",(0,o.jsx)("i",{className:"dashicons dashicons-arrow-down-alt2"})]}),(0,o.jsx)("div",{className:"categories-list ".concat(l?"active":""),children:(0,o.jsx)("ul",{children:n.map(function(e){return(0,o.jsx)("li",{children:(0,o.jsx)("button",{className:a===e.id?"active":"",onClick:function(){i(e.id),c(!1)},children:(0,o.jsxs)("span",{className:"category-name",children:[e.name," (",e.count,")"]})})},e.id)})})})]})};wp.icons;function te(e){return te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},te(e)}function ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function re(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(n),!0).forEach(function(t){ae(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ne(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ae(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=te(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=te(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==te(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw a}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ie(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ie(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const se=function(e){var t=e.categories,n=e.activeCategory,i=e.onCategoryChange,s=e.activePlanFilter,l=e.onPlanFilterChange,c=e.onFavoritesFilterChange,u=e.mode,d=e.templates,p=void 0===d?[]:d,f=e.onTemplateSelect,m=e.onImport,h=e.parentTemplate,v=e.parentTemplateCategory,y=e.requiredPlugins,g=void 0===y?[]:y,b=e.pluginStatuses,j=void 0===b?{}:b,_=oe((0,r.useState)(0),2),w=_[0],x=_[1],k=oe((0,r.useState)(!1),2),N=k[0],T=k[1],S=Array.isArray(p)?p:null!=p&&p.templates&&Array.isArray(p.templates)?p.templates:[],O=oe((0,r.useState)(""),2),C=O[0],P=O[1],I=oe((0,r.useState)(""),2),E=I[0],A=I[1],F=oe((0,r.useState)(function(){return g.reduce(function(e,t){return(j[t.slug]||t).is_active||(e[t.plugin_file]=!0),e},{})}),2),L=F[0],M=F[1],B=(S.find(function(e){return e.template_id===C}),oe((0,r.useState)(!1),2)),G=B[0],R=B[1];(0,r.useEffect)(function(){g||(g=[]),!G&&g.length>0&&(M(g.reduce(function(e,t){return(j[t.slug]||t).is_active||(e[t.plugin_file]=!0),e},{})),R(!0))},[g,j,G]),(0,r.useEffect)(function(){if(S.length>0){if(!S.find(function(e){return e.template_id==C})){var e=S[0];P(e.template_id),A(e.title||""),f&&f(e)}}else P(""),A("")},[S]);(0,r.useEffect)(function(){var e=function(){try{var e="kits"===u?"kits":"library",t=JSON.parse(localStorage.getItem("jltma_favorites")||"{}")[e]||[];x(t.length)}catch(e){x(0)}};return e(),window.addEventListener("jltma-favorites-updated",e),function(){window.removeEventListener("jltma-favorites-updated",e)}},[u]);var D=h?v:n,K=t.find(function(e){return e.id===D}),q=K&&"all"!==K.id?K.name:"",U=(null==h?void 0:h.title)||(null==h?void 0:h.kit_name)||(null==h?void 0:h.name)||"",$=q||U;return(0,o.jsx)("div",{className:"vertical-filter-sidebar",children:S.length>0?(0,o.jsxs)("div",{className:"template-info-section",children:[$&&(0,o.jsxs)("div",{className:"template-breadcrumbs",children:[q&&(0,o.jsxs)(o.Fragment,{children:["Kits ",(0,o.jsx)("i",{className:"eicon-chevron-right breadcrumb-separator"})," ",(0,o.jsx)("span",{className:"breadcrumb-item",children:q}),U&&(0,o.jsx)("i",{className:"eicon-chevron-right breadcrumb-separator"})]}),U&&(0,o.jsx)("span",{className:"breadcrumb-item breadcrumb-current",children:U})]}),(0,o.jsx)("p",{className:"template-description",children:"Import professionally designed Elementor Templates with just one click. Our template kits include everything you need to create stunning websites quickly and efficiently."}),S.length>1&&(0,o.jsxs)("div",{className:"template-selector-wrapper",children:[(0,o.jsx)("label",{htmlFor:"template-select",className:"template-selector-label",children:(0,a.__)("Select a Page","master-addons")}),(0,o.jsx)("select",{id:"template-select",value:C,onChange:function(e){var t=e.target.value;P(t);var n=S.find(function(e){return e.template_id==t});n?(A(n.title||""),f&&f(n)):console.warn("Template not found for ID:",t)},className:"kit-template-selector",children:S.map(function(e){return(0,o.jsx)("option",{value:e.template_id,children:e.title},e.template_id)})})]}),(0,o.jsxs)("div",{className:"page-title-input-wrapper",children:[(0,o.jsx)("label",{htmlFor:"page-title",className:"page-title-label",children:(0,a.__)("Page Title","master-addons")}),(0,o.jsx)("input",{type:"text",id:"page-title",name:"page-title",className:"page-title-input",value:E,onChange:function(e){return A(e.target.value)},placeholder:(0,a.__)("Enter page title...","master-addons")})]}),g&&g.length>0?(0,o.jsxs)("div",{className:"required-plugins",children:[(0,o.jsx)("h4",{className:"section-title",children:"Required Plugins"}),(0,o.jsx)("ul",{children:g.map(function(e,t){var n=j[e.slug]||e,r=n.is_active,a=n.is_installed;return(0,o.jsx)("li",{className:r?"plugin-active":"",children:r?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("span",{className:"dashicons dashicons-yes-alt",style:{color:"#4CAF50",marginRight:"8px"}}),(0,o.jsxs)("span",{children:[e.name," ",(0,o.jsx)("span",{style:{fontSize:"12px",color:"#4CAF50"},children:"(Active)"})]})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("input",{type:"checkbox",id:"plugin-".concat(e.slug),name:"plugins[]",value:"".concat(e.plugin_file),checked:L[e.plugin_file]||!1,onChange:function(t){M(function(n){return re(re({},n),{},ae({},e.plugin_file,t.target.checked))})}}),(0,o.jsxs)("label",{htmlFor:"plugin-".concat(e.slug),children:[e.name,a&&!r&&(0,o.jsx)("span",{style:{fontSize:"12px",color:"#666",marginLeft:"5px"},children:"(Installed but inactive)"})]})]})},e.plugin_file||t)})})]}):null,(0,o.jsxs)("button",{className:"insert-button",onClick:function(){if(C&&m){var e=S.find(function(e){return e.template_id==C});if(e){var t=g.filter(function(e){return!0===L[e.plugin_file]}),n=re(re({},e),{},{page_name:E||e.title,required_plugins:t});m(n,h)}else console.warn("Selected template not found in list")}else console.warn("No template selected or onImport not provided")},disabled:!C,title:Object.values(L).some(function(e){return e})?(0,a.__)("Install & Insert","master-addons"):(0,a.__)("Insert Page","master-addons"),children:[(0,o.jsx)("span",{className:"dashicons dashicons-plus-alt"}),Object.values(L).some(function(e){return e})?(0,a.__)("Install & Insert","master-addons"):(0,a.__)("Insert Page","master-addons")]})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"filter-section favorites-section",children:(0,o.jsxs)("button",{className:"favorites-filter-btn ".concat(N?"active":""),onClick:function(){var e=!N;T(e),c?c(e):console.warn("onFavoritesFilterChange is not provided")},children:[(0,o.jsx)("span",{className:"eicon-heart-o"}),(0,o.jsxs)("span",{className:"favorites-label",children:[(0,a.__)("Favorites","master-addons"),w>0&&(0,o.jsxs)("span",{className:"favorites-count",children:["(",w,")"]})]})]})}),(0,o.jsxs)("div",{className:"filter-section",children:[(0,o.jsx)("h3",{className:"filter-title",children:(0,a.__)("Filter by Plan","master-addons")}),(0,o.jsxs)("div",{className:"plan-filters",children:[(0,o.jsx)("button",{className:"plan-filter-btn ".concat("all"===s?"active":""),onClick:function(){return l("all")},children:(0,a.__)("All","master-addons")}),(0,o.jsx)("button",{className:"plan-filter-btn free ".concat("free"===s?"active":""),onClick:function(){return l("free")},children:(0,a.__)("Free","master-addons")}),(0,o.jsx)("button",{className:"plan-filter-btn pro ".concat("pro"===s?"active":""),onClick:function(){return l("pro")},children:(0,a.__)("Pro","master-addons")})]})]}),(0,o.jsxs)("div",{className:"filter-section",children:[(0,o.jsx)("h3",{className:"filter-title",children:(0,a.__)("Filter by Category","master-addons")}),(0,o.jsx)("div",{className:"category-filters-pills",children:t.map(function(e){return(0,o.jsx)("button",{className:"category-pill-btn ".concat(n===e.id?"active":""),onClick:function(){return i(e.id)},children:e.name},e.id)})})]})]})})};function le(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,r,a,o){var l=r&&r.prototype instanceof s?r:s,c=Object.create(l.prototype);return ce(c,"_invoke",function(n,r,a){var o,s,l,c=0,u=a||[],d=!1,p={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return o=t,s=0,l=e,p.n=n,i}};function f(n,r){for(s=n,l=r,t=0;!d&&c&&!a&&t<u.length;t++){var a,o=u[t],f=p.p,m=o[2];n>3?(a=m===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=f&&((a=n<2&&f<o[1])?(s=0,p.v=r,p.n=o[1]):f<m&&(a=n<3||o[0]>r||r>m)&&(o[4]=n,o[5]=r,p.n=m,s=0))}if(a||n>1)return i;throw d=!0,r}return function(a,u,m){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&f(u,m),s=u,l=m;(t=s<2?e:l)||!d;){o||(s?s<3?(s>1&&(p.n=-1),f(s,l)):p.n=l:p.v=l);try{if(c=2,o){if(s||(a="next"),t=o[a]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),s=1);o=e}else if((t=(d=p.n<0)?l:n.call(r,p))!==i)break}catch(t){o=e,s=1,l=t}finally{c=1}}return{value:t,done:d}}}(n,a,o),!0),c}var i={};function s(){}function l(){}function c(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(ce(t={},r,function(){return this}),t),d=c.prototype=s.prototype=Object.create(u);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,ce(e,a,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=c,ce(d,"constructor",c),ce(c,"constructor",l),l.displayName="GeneratorFunction",ce(c,a,"GeneratorFunction"),ce(d),ce(d,a,"Generator"),ce(d,r,function(){return this}),ce(d,"toString",function(){return"[object Generator]"}),(le=function(){return{w:o,m:p}})()}function ce(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}ce=function(e,t,n,r){function o(t,n){ce(e,t,function(e){return this._invoke(t,n,e)})}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(o("next",0),o("throw",1),o("return",2))},ce(e,t,n,r)}function ue(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function de(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw a}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return pe(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?pe(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const fe=function(e){var t=e.categoryName,n=e.templateCount,i=e.searchTerm,s=e.onSearchChange,l=e.onRefresh,c=e.refreshing,u=e.activeTab,d=e.onTabChange,p=e.templateCounts,f=e.showTabs,m=void 0===f||f,h=e.tabs,v=void 0===h?[]:h,y=e.strings,g=void 0===y?{}:y,b=e.mode,j=e.parentTemplate,_=e.backButtonClick,w=e.setIsUploaderOpen,x=e.categories,k=e.activeCategory,N=e.onCategoryChange,T=e.hideFilters,S=void 0!==T&&T,O=e.isPageImporterMode,C=void 0!==O&&O,P=(e.activePlanFilter,e.onPlanFilterChange,e.activeDevice),I=e.onDeviceChange,E=e.nonce,A=e.ajaxurl,F=de((0,r.useState)(i),2),L=F[0],M=F[1],B=de((0,r.useState)(!1),2),G=B[0],R=B[1],D=de((0,r.useState)(!1),2),K=D[0],q=D[1],U=de((0,r.useState)(!1),2),$=U[0],J=U[1],z=(0,r.useRef)(null),W=(0,r.useRef)(null),V=(0,r.useRef)(null),H="https://www.youtube.com/embed/dQw4w9WgXcQ",Y=function(e){var t=e.target.value;M(t),V.current&&clearTimeout(V.current),V.current=setTimeout(function(){s(t),V.current=null},300)},X=function(){var e=!G;R(e),e&&setTimeout(function(){W.current&&W.current.focus()},100)},Q=function(){M(""),s(""),V.current&&clearTimeout(V.current)};(0,r.useEffect)(function(){var e=function(e){z.current&&!z.current.contains(e.target)&&G&&R(!1)};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}},[G]),(0,r.useEffect)(function(){return function(){V.current&&clearTimeout(V.current)}},[]),(0,r.useEffect)(function(){M(i)},[i]);var te=j&&j.categories&&(j.categories.includes("purchased")||"purchased"===j.categories),ne=function(){var e,t=(e=le().m(function e(){var t,n,r;return le().w(function(e){for(;;)switch(e.p=e.n){case 0:if(j&&j.kit_id){e.n=1;break}return e.a(2);case 1:if(te){e.n=2;break}return window.swal({title:(0,a.__)("Failed","master-addons"),text:(0,a.__)("Only purchased kits can be deleted.","master-addons"),icon:"error",confirmButtonColor:"#d33",confirmButtonText:"OK"}),e.a(2);case 2:return e.n=3,window.swal({title:"Delete Template Kit !!!",text:(0,a.__)('Are you sure you want to delete "'.concat(j.kit_name||j.title,'"? This action cannot be undone.'),"master-addons"),icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel",reverseButtons:!0});case 3:if(e.v){e.n=4;break}return e.a(2);case 4:return q(!0),e.p=5,(t=new FormData).append("action","jltma_delete_purchased_kit"),t.append("_wpnonce",E),t.append("kit_id",j.kit_id.split("-").slice(-1)[0]),e.n=6,fetch(A,{method:"POST",body:t});case 6:return n=e.v,e.n=7,n.json();case 7:e.v.success?(window.swal({title:(0,a.__)("Success","master-addons"),text:(0,a.__)("Kit deleted successfully!","master-addons"),icon:"success",confirmButtonColor:"#3085d6",confirmButtonText:"Great!"}),_&&"function"==typeof _&&_()):window.swal({title:(0,a.__)("Failed","master-addons"),text:(0,a.__)("Kit delation failed","master-addons"),icon:"error",confirmButtonColor:"#d33",confirmButtonText:"OK"}),e.n=9;break;case 8:e.p=8,r=e.v,window.swal({title:"Delete Error",text:"An error occurred while deleting the kit: ".concat(r.message),icon:"error",confirmButtonColor:"#d33",confirmButtonText:"OK"});case 9:return e.p=9,q(!1),e.f(9);case 10:return e.a(2)}},e,null,[[5,8,9,10]])}),function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){ue(o,r,a,i,s,"next",e)}function s(e){ue(o,r,a,i,s,"throw",e)}i(void 0)})});return function(){return t.apply(this,arguments)}}();return(0,o.jsxs)("div",{className:"content-header",children:[m&&(0,o.jsxs)("div",{className:"template-library-header",children:[(0,o.jsxs)("div",{className:"template-library-tabs-wrapper ".concat(C?"page-importer-mode":""," ").concat("kits"===b&&C?"kits-mode":""," ").concat(j?"has-parent-template":""),children:[!j&&(0,o.jsx)("div",{className:"template-library-header-logo",children:(0,o.jsx)("img",{src:"".concat(window.JLTMATemplateLibrary.pluginUrl,"/assets/images/logo.svg"),alt:"master-addons"})}),j&&"kits"===b&&C||j&&"library"===b&&C?(0,o.jsxs)("div",{className:"back-btn",onClick:_,children:[(0,o.jsx)("span",{className:"dashicons dashicons-arrow-left-alt2"}),(0,a.__)("Back to ".concat("kits"===b?"kits":"Library"),"master-addons")]}):null,j&&("kits"===b||"library"===b)&&C&&I&&(0,o.jsx)("div",{className:"template-preview-toolbar-center",children:(0,o.jsxs)("div",{className:"template-preview-devices",children:[(0,o.jsx)("button",{type:"button",className:"template-preview-device-btn ".concat("desktop"===P?"active":""),onClick:function(){return I("desktop")},title:(0,a.__)("Desktop","master-addons"),children:(0,o.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,o.jsx)("rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",ry:"2"}),(0,o.jsx)("line",{x1:"8",y1:"21",x2:"16",y2:"21"}),(0,o.jsx)("line",{x1:"12",y1:"17",x2:"12",y2:"21"})]})}),(0,o.jsx)("button",{type:"button",className:"template-preview-device-btn ".concat("tablet"===P?"active":""),onClick:function(){return I("tablet")},title:(0,a.__)("Tablet","master-addons"),children:(0,o.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,o.jsx)("rect",{x:"5",y:"2",width:"14",height:"20",rx:"2",ry:"2"}),(0,o.jsx)("line",{x1:"12",y1:"18",x2:"12.01",y2:"18"})]})}),(0,o.jsx)("button",{type:"button",className:"template-preview-device-btn ".concat("mobile"===P?"active":""),onClick:function(){return I("mobile")},title:(0,a.__)("Mobile","master-addons"),children:(0,o.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,o.jsx)("rect",{x:"7",y:"2",width:"10",height:"20",rx:"2",ry:"2"}),(0,o.jsx)("line",{x1:"12",y1:"18",x2:"12.01",y2:"18"})]})})]})}),"kits"===b||j?null:(0,o.jsx)(Z,{activeTab:u,onTabChange:d,templateCounts:p||{},tabs:function(){if(C){var e=[{id:"master_pages",label:(0,a.__)("Pages","master-addons"),icon:"dashicons-admin-page"},{id:"master_section",label:(0,a.__)("Sections","master-addons"),icon:"dashicons-layout"}];return v.length>0?v.filter(function(e){return"master_footers"!==e.id&&"master_headers"!==e.id}):e}return v}()}),"kits"===b&&C&&!j&&(0,o.jsx)("div",{className:"template-kits-title",children:(0,o.jsx)("h2",{children:(0,a.__)("Template Kits","master-addons")})}),C&&(0,o.jsxs)("div",{ref:z,className:"header-search-collapsible ".concat(G?"expanded":""," ").concat(L?"has-value":""),children:[(0,o.jsx)("input",{ref:W,type:"text",placeholder:g.searchPlaceholder||(0,a.__)("Search templates...","master-addons"),value:L,onChange:Y,className:"search-input"}),L&&G&&(0,o.jsx)("button",{className:"clear-search-btn",onClick:Q,title:(0,a.__)("Clear search","master-addons"),children:(0,o.jsx)("span",{className:"dashicons dashicons-no-alt"})}),(0,o.jsx)("button",{className:"search-toggle-btn",onClick:X,title:(0,a.__)("Search templates","master-addons"),children:(0,o.jsx)("span",{className:"dashicons dashicons-search"})})]}),(0,o.jsxs)("button",{className:"refresh-btn",onClick:l,disabled:c,title:(0,a.__)("Refresh templates from server","master-addons"),children:[(0,o.jsx)("span",{className:"dashicons dashicons-update ".concat(c?"spinning":"")}),(0,a.__)("","master-addons")]})]}),!S&&!C&&(0,o.jsxs)("div",{className:"template-library-categories-wrapper",children:[(0,o.jsxs)("div",{className:"template-library-categories-count",children:[(0,o.jsx)(ee,{categoryName:t,categories:x,activeCategory:k,onCategoryChange:N}),(0,o.jsxs)("div",{className:"template-count",children:[n," ",1===n?(0,a.__)("template","master-addons"):(0,a.__)("templates","master-addons")]})]}),(0,o.jsxs)("div",{className:"search-container",children:[(0,o.jsx)("input",{type:"text",placeholder:g.searchPlaceholder||(0,a.__)("Search templates...","master-addons"),value:L,onChange:Y}),(0,o.jsx)("span",{className:"search-icon dashicons dashicons-search"})]})]})]}),"kits"===b&&!C&&(0,o.jsxs)("div",{className:"template-kit-header",children:[j?(0,o.jsxs)("div",{className:"back-btn",onClick:_,children:[(0,o.jsx)("span",{className:"dashicons dashicons-arrow-left-alt2"}),(0,a.__)("Back to Library","master-addons")]}):(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(ee,{categoryName:t,categories:x,activeCategory:k,onCategoryChange:N,mode:b})}),(0,o.jsx)("div",{className:"template-kit-header-logo",children:(0,o.jsx)("img",{src:"".concat(window.JLTMATemplateLibrary.pluginUrl,"/assets/images/logo.svg"),alt:"master-addons"})}),(0,o.jsxs)("div",{className:"template-kit-upload-wrapper",children:[!j&&(0,o.jsxs)(o.Fragment,{children:[H?(0,o.jsx)("button",{className:"tutorial-btn has-tooltip",onClick:function(){return J(!0)},"data-tooltip":(0,a.__)("Watch tutorial","master-addons"),"aria-label":(0,a.__)("Watch tutorial","master-addons"),children:(0,o.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-youtube-icon lucide-youtube",children:[(0,o.jsx)("path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17"}),(0,o.jsx)("path",{d:"m10 15 5-3-5-3z"})]})}):null,(0,o.jsxs)("div",{ref:z,className:"search-container ".concat(G?"search-expanded":""," ").concat(L?"has-value":""),children:[(0,o.jsx)("input",{ref:W,type:"text",placeholder:g.searchPlaceholder||(0,a.__)("Search templates...","master-addons"),value:L,onChange:Y,className:"search-input"}),L&&G&&(0,o.jsx)("button",{className:"clear-search-btn has-tooltip",onClick:Q,title:(0,a.__)("Clear search","master-addons"),"data-tooltip":(0,a.__)("Clear search","master-addons"),"aria-label":(0,a.__)("Clear search","master-addons"),children:(0,o.jsx)("span",{className:"dashicons dashicons-no-alt"})}),(0,o.jsx)("button",{className:"search-toggle-btn has-tooltip",onClick:X,title:(0,a.__)("Search templates","master-addons"),"data-tooltip":(0,a.__)("Search templates","master-addons"),"aria-label":(0,a.__)("Search templates","master-addons"),children:(0,o.jsx)("span",{className:"dashicons dashicons-search"})})]}),(0,o.jsx)("div",{className:"upload-kit has-tooltip","data-tooltip":(0,a.__)("Upload Kit","master-addons"),"aria-label":(0,a.__)("Upload Kit","master-addons"),children:(0,o.jsx)("span",{className:"import-kit-btn ",onClick:function(){w(function(e){return!e})},children:(0,o.jsx)("span",{className:"upload-icon",children:(0,o.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-cloud-upload-icon lucide-cloud-upload",children:[(0,o.jsx)("path",{d:"M12 13v8"}),(0,o.jsx)("path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242"}),(0,o.jsx)("path",{d:"m8 17 4-4 4 4"})]})})})})]}),te&&(0,o.jsx)("div",{className:"template-kit-extra",children:(0,o.jsx)("button",{className:"delete-kit-btn",onClick:function(e){e.stopPropagation(),ne()},disabled:K,title:(0,a.__)("Delete this kits","master-addons"),children:(0,o.jsx)("span",{className:"dashicons dashicons-trash"})})}),(0,o.jsxs)("button",{className:"refresh-btn",onClick:l,disabled:c,title:(0,a.__)("Refresh templates from server","master-addons"),children:[(0,o.jsx)("span",{className:"dashicons dashicons-update ".concat(c?"spinning":"")}),(0,a.__)("","master-addons")]})]})]}),$&&(0,o.jsx)("div",{className:"jltma-video-modal-overlay",onClick:function(){return J(!1)},children:(0,o.jsxs)("div",{className:"jltma-video-modal-content",onClick:function(e){return e.stopPropagation()},children:[(0,o.jsx)("button",{className:"jltma-video-modal-close",onClick:function(){return J(!1)},title:(0,a.__)("Close","master-addons"),children:(0,o.jsx)("span",{className:"dashicons dashicons-no-alt"})}),(0,o.jsx)("div",{className:"jltma-video-wrapper",children:(0,o.jsx)("iframe",{width:"100%",height:"100%",src:H,title:(0,a.__)("Tutorial Video","master-addons"),frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})]})})]})};function me(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,r,a,o){var l=r&&r.prototype instanceof s?r:s,c=Object.create(l.prototype);return he(c,"_invoke",function(n,r,a){var o,s,l,c=0,u=a||[],d=!1,p={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return o=t,s=0,l=e,p.n=n,i}};function f(n,r){for(s=n,l=r,t=0;!d&&c&&!a&&t<u.length;t++){var a,o=u[t],f=p.p,m=o[2];n>3?(a=m===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=f&&((a=n<2&&f<o[1])?(s=0,p.v=r,p.n=o[1]):f<m&&(a=n<3||o[0]>r||r>m)&&(o[4]=n,o[5]=r,p.n=m,s=0))}if(a||n>1)return i;throw d=!0,r}return function(a,u,m){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&f(u,m),s=u,l=m;(t=s<2?e:l)||!d;){o||(s?s<3?(s>1&&(p.n=-1),f(s,l)):p.n=l:p.v=l);try{if(c=2,o){if(s||(a="next"),t=o[a]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),s=1);o=e}else if((t=(d=p.n<0)?l:n.call(r,p))!==i)break}catch(t){o=e,s=1,l=t}finally{c=1}}return{value:t,done:d}}}(n,a,o),!0),c}var i={};function s(){}function l(){}function c(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(he(t={},r,function(){return this}),t),d=c.prototype=s.prototype=Object.create(u);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,he(e,a,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=c,he(d,"constructor",c),he(c,"constructor",l),l.displayName="GeneratorFunction",he(c,a,"GeneratorFunction"),he(d),he(d,a,"Generator"),he(d,r,function(){return this}),he(d,"toString",function(){return"[object Generator]"}),(me=function(){return{w:o,m:p}})()}function he(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}he=function(e,t,n,r){function o(t,n){he(e,t,function(e){return this._invoke(t,n,e)})}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(o("next",0),o("throw",1),o("return",2))},he(e,t,n,r)}function ve(e){return function(e){if(Array.isArray(e))return je(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||be(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ye(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function ge(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw a}}return s}}(e,t)||be(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function be(e,t){if(e){if("string"==typeof e)return je(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?je(e,t):void 0}}function je(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const _e=function(e){e.isOpen;var t=e.onUploadComplete,n=e.nonce,i=e.ajaxurl,s=ge((0,r.useState)(!1),2),l=s[0],c=s[1],u=ge((0,r.useState)(0),2),d=u[0],p=u[1],f=ge((0,r.useState)(""),2),m=f[0],h=f[1],v=ge((0,r.useState)(null),2),y=v[0],g=v[1],b=(0,r.useRef)(null),j=function(){var e,r=(e=me().m(function e(r){var o,s;return me().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,window.swal({title:"Upload Template Kit?",text:'Are you sure you want to upload "'.concat(r.name,'"?'),icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, upload it!",cancelButtonText:"Cancel",reverseButtons:!0});case 1:if(e.v){e.n=2;break}return e.a(2);case 2:window.swal({title:"",html:'\n        <div className="jltma-uploading-wrapper">\n          <div className="swal2-loader"></div>\n          <h2>Uploading Template Kit</h2>\n          <p>\n            Do not refresh until the process completes.\n          </p>\n        </div>\n      ',icon:"info",iconColor:"#3085d6",showConfirmButton:!1,allowOutsideClick:!1,didOpen:function(){window.swal.showLoading()}}),c(!0),h(""),p(0),(o=new FormData).append("action","jltma_upload_template_kit"),o.append("_wpnonce",n),o.append("kit_file",r);try{(s=new XMLHttpRequest).upload.addEventListener("progress",function(e){if(e.lengthComputable){var t=Math.round(e.loaded/e.total*100);p(t)}}),s.onload=function(){if(200===s.status)try{var e=JSON.parse(s.responseText);if(e.success)g(e.data),window.swal({title:"",html:(p=ve(Array(50)).map(function(e,t){return'\n                        <div\n                          className="confetti-piece"\n                          style="\n                            left: '.concat(100*Math.random(),"%;\n                            animation-delay: ").concat(3*Math.random(),"s;\n                            background-color: ").concat(["#6814cd","#F50A7F","#4CAF50","#FFC107","#2196F3"][Math.floor(5*Math.random())],';\n                          "\n                        ></div>\n                      ')}).join(""),'\n                    <div className="confetti-container"> \n                    '.concat(p,'\n                    </div>\n                    <div className="jltma-uploading-wrapper">\n                      <h2>Success! </h2>\n                      <p style="margin: 0;">\n                        ').concat((null===(l=e.data)||void 0===l?void 0:l.message)||"Template kit '".concat(null===(u=e.data)||void 0===u?void 0:u.name,"' has been uploaded successfully with ").concat((null===(d=e.data)||void 0===d?void 0:d.template_count)||0," templates."),"\n                      </p>\n                    </div>\n                  ")),icon:"success",confirmButtonColor:"#3085d6",confirmButtonText:"Great!"}),t&&t(e.data),b.current&&(b.current.value="");else{var n,r=(null===(n=e.data)||void 0===n?void 0:n.message)||(0,a.__)("Upload failed","master-addons");h(r),window.swal({title:"Upload Failed",text:r,icon:"error",confirmButtonColor:"#d33",confirmButtonText:"OK"})}}catch(e){var o=(0,a.__)("Invalid response from server","master-addons");h(o),window.swal({title:"Error",text:o,icon:"error",confirmButtonColor:"#d33",confirmButtonText:"OK"})}else{var i=(0,a.__)("Upload failed","master-addons");h(i),window.swal({title:"Upload Failed",text:i,icon:"error",confirmButtonColor:"#d33",confirmButtonText:"OK"})}var l,u,d,p;c(!1)},s.onerror=function(){var e=(0,a.__)("Network error occurred","master-addons");h(e),c(!1),window.swal({title:"Network Error",text:e,icon:"error",confirmButtonColor:"#d33",confirmButtonText:"OK"})},s.open("POST",i),s.send(o)}catch(e){h((0,a.__)("Upload failed","master-addons")),c(!1)}case 3:return e.a(2)}},e)}),function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){ye(o,r,a,i,s,"next",e)}function s(e){ye(o,r,a,i,s,"throw",e)}i(void 0)})});return function(e){return r.apply(this,arguments)}}();return(0,o.jsxs)("div",{className:"kit-template-importer",children:[(0,o.jsxs)("div",{className:"kit-template-uploader",onDrop:function(e){e.preventDefault(),e.stopPropagation();var t=e.dataTransfer.files[0];if(t){if("application/zip"!==t.type&&!t.name.endsWith(".zip"))return void h((0,a.__)("Please drop a valid ZIP file","master-addons"));j(t)}},onDragOver:function(e){e.preventDefault(),e.stopPropagation()},onClick:function(){b.current&&!l&&b.current.click()},children:[(0,o.jsx)("input",{ref:b,type:"file",accept:".zip",onChange:function(e){var t=e.target.files[0];if(t){if("application/zip"!==t.type&&!t.name.endsWith(".zip"))return void h((0,a.__)("Please select a valid ZIP file","master-addons"));j(t)}},style:{display:"none"}}),l?(0,o.jsxs)("div",{className:"uploader-progress",children:[(0,o.jsx)("div",{className:"progress-bar",children:(0,o.jsx)("div",{className:"progress-fill",style:{width:"".concat(d,"%")}})}),(0,o.jsx)("span",{className:"progress-text",children:(0,a.sprintf)((0,a.__)("Uploading... %d%%","master-addons"),d)})]}):(0,o.jsxs)("div",{className:"uploader-overlay",children:[(0,o.jsx)("div",{className:"uploader-icon",children:(0,o.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"#6a4bff","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-cloud-upload-icon lucide-cloud-upload",children:[(0,o.jsx)("path",{d:"M12 13v8"}),(0,o.jsx)("path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242"}),(0,o.jsx)("path",{d:"m8 17 4-4 4 4"})]})}),m&&(0,o.jsxs)("div",{className:"upload-error",children:[(0,o.jsx)("span",{className:"dashicons dashicons-warning"}),m]})]})]}),y&&(0,o.jsx)("div",{className:"kit-template-grid",children:(0,o.jsx)("div",{className:"kit-template-imported-item",children:(0,o.jsxs)("div",{className:"imported-kit-info",children:[(0,o.jsx)("h4",{children:y.name||(0,a.__)("Template Kit Uploaded","master-addons")}),(0,o.jsx)("p",{children:(0,a.sprintf)((0,a.__)("%d templates imported","master-addons"),y.template_count||0)})]})})})]})};function we(e){return we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},we(e)}function xe(e){if(null!=e){var t=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}throw new TypeError(we(e)+" is not iterable")}function ke(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,r,a,o){var l=r&&r.prototype instanceof s?r:s,c=Object.create(l.prototype);return Ne(c,"_invoke",function(n,r,a){var o,s,l,c=0,u=a||[],d=!1,p={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return o=t,s=0,l=e,p.n=n,i}};function f(n,r){for(s=n,l=r,t=0;!d&&c&&!a&&t<u.length;t++){var a,o=u[t],f=p.p,m=o[2];n>3?(a=m===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=f&&((a=n<2&&f<o[1])?(s=0,p.v=r,p.n=o[1]):f<m&&(a=n<3||o[0]>r||r>m)&&(o[4]=n,o[5]=r,p.n=m,s=0))}if(a||n>1)return i;throw d=!0,r}return function(a,u,m){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&f(u,m),s=u,l=m;(t=s<2?e:l)||!d;){o||(s?s<3?(s>1&&(p.n=-1),f(s,l)):p.n=l:p.v=l);try{if(c=2,o){if(s||(a="next"),t=o[a]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),s=1);o=e}else if((t=(d=p.n<0)?l:n.call(r,p))!==i)break}catch(t){o=e,s=1,l=t}finally{c=1}}return{value:t,done:d}}}(n,a,o),!0),c}var i={};function s(){}function l(){}function c(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(Ne(t={},r,function(){return this}),t),d=c.prototype=s.prototype=Object.create(u);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,Ne(e,a,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=c,Ne(d,"constructor",c),Ne(c,"constructor",l),l.displayName="GeneratorFunction",Ne(c,a,"GeneratorFunction"),Ne(d),Ne(d,a,"Generator"),Ne(d,r,function(){return this}),Ne(d,"toString",function(){return"[object Generator]"}),(ke=function(){return{w:o,m:p}})()}function Ne(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}Ne=function(e,t,n,r){function o(t,n){Ne(e,t,function(e){return this._invoke(t,n,e)})}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(o("next",0),o("throw",1),o("return",2))},Ne(e,t,n,r)}function Te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Te(Object(n),!0).forEach(function(t){Oe(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Te(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Oe(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=we(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=we(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==we(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ce(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Fe(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function Pe(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function Ie(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){Pe(o,r,a,i,s,"next",e)}function s(e){Pe(o,r,a,i,s,"throw",e)}i(void 0)})}}function Ee(e){return function(e){if(Array.isArray(e))return Le(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Fe(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ae(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw a}}return s}}(e,t)||Fe(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fe(e,t){if(e){if("string"==typeof e)return Le(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Le(e,t):void 0}}function Le(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const Me=function(e){var t=e.isOpen,n=e.onClose,i=e.templateData,s=e.parentTemplate,l=e.onImportComplete,c=e.requiredPlugins,u=void 0===c?[]:c,d=(e.pluginStatuses,e.isFullKitImport),p=void 0!==d&&d,f=e.onInstallPlugin,m=e.onActivatePlugin,h=e.nonce,v=e.ajaxurl,y=Ae((0,r.useState)(0),2),g=y[0],b=y[1],j=Ae((0,r.useState)(!1),2),_=j[0],w=j[1],x=Ae((0,r.useState)(null),2),k=x[0],N=x[1],T=Ae((0,r.useState)([]),2),S=(T[0],T[1],Ae((0,r.useState)(!1),2)),O=(S[0],S[1]),C=Ae((0,r.useState)({}),2),P=C[0],I=C[1],E=Ae((0,r.useState)({current:0,total:0,currentTemplate:null}),2),A=E[0],F=E[1],L=Ae((0,r.useState)([]),2),M=L[0],B=L[1],G=p&&Array.isArray(i)?i:[i],R=G.length,D=u.length>0&&u.some(function(e){return!e.is_active}),K=p?[{id:2,title:(0,a.sprintf)((0,a.__)("Importing %d templates","master-addons"),R),shortTitle:(0,a.__)("Importing kit","master-addons"),icon:"dashicons-admin-page"},{id:3,title:(0,a.__)("Processing content","master-addons"),shortTitle:(0,a.__)("Processing","master-addons"),icon:"dashicons-text-page"},{id:4,title:(0,a.__)("Importing images","master-addons"),shortTitle:(0,a.__)("Images","master-addons"),icon:"dashicons-format-image"},{id:5,title:(0,a.__)("Finalizing","master-addons"),shortTitle:(0,a.__)("Finalizing","master-addons"),icon:"dashicons-yes-alt"}]:[{id:2,title:(0,a.__)("Creating template","master-addons"),shortTitle:(0,a.__)("Creating","master-addons"),icon:"dashicons-admin-page"},{id:3,title:(0,a.__)("Importing content","master-addons"),shortTitle:(0,a.__)("Content","master-addons"),icon:"dashicons-text-page"},{id:4,title:(0,a.__)("Importing images","master-addons"),shortTitle:(0,a.__)("Images","master-addons"),icon:"dashicons-format-image"},{id:5,title:(0,a.__)("Finalizing","master-addons"),shortTitle:(0,a.__)("Finalizing","master-addons"),icon:"dashicons-yes-alt"}],q=D?[{id:1,title:(0,a.__)("Installing plugins","master-addons"),shortTitle:(0,a.__)("Plugins","master-addons"),icon:"dashicons-admin-plugins"}].concat(K):K;(0,r.useEffect)(function(){if(t){var e={};u.forEach(function(t){e[t.slug]={is_installed:t.is_installed||!1,is_active:t.is_active||!1}}),I(e),0===u.length||u.every(function(e){return e.is_active})?(b(1),$()):(b(1),U())}},[t]);var U=function(){var e=Ie(ke().m(function e(){var t,n,r,o,i;return ke().w(function(e){for(;;)switch(e.p=e.n){case 0:if(0!==u.length){e.n=1;break}return $(),e.a(2);case 1:O(!0),e.p=2,t=Ce(u),e.p=3,r=ke().m(function e(){var t,r;return ke().w(function(e){for(;;)switch(e.n){case 0:if(t=n.value,(r=P[t.slug]||t).is_active){e.n=5;break}if(r.is_installed){e.n=3;break}if(!f){e.n=2;break}return e.n=1,f(t,!0);case 1:I(function(e){return Se(Se({},e),{},Oe({},t.slug,Se(Se({},e[t.slug]),{},{is_installed:!0,is_active:!0})))});case 2:e.n=5;break;case 3:if(!m){e.n=5;break}return e.n=4,m(t,!0);case 4:I(function(e){return Se(Se({},e),{},Oe({},t.slug,Se(Se({},e[t.slug]),{},{is_active:!0})))});case 5:return e.a(2)}},e)}),t.s();case 4:if((n=t.n()).done){e.n=6;break}return e.d(xe(r()),5);case 5:e.n=4;break;case 6:e.n=8;break;case 7:e.p=7,o=e.v,t.e(o);case 8:return e.p=8,t.f(),e.f(8);case 9:$(),e.n=11;break;case 10:e.p=10,i=e.v,console.error("Error installing plugins:",i),N((0,a.__)("Failed to install required plugins. Please try again.","master-addons")),b(7);case 11:return e.p=11,O(!1),e.f(11);case 12:return e.a(2)}},e,null,[[3,7,8,9],[2,10,11,12]])}));return function(){return e.apply(this,arguments)}}(),$=function(){var e=Ie(ke().m(function e(){var t;return ke().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,!p){e.n=2;break}return e.n=1,z();case 1:e.n=3;break;case 2:return e.n=3,J();case 3:e.n=5;break;case 4:e.p=4,t=e.v,N(t.message||(0,a.__)("Failed to import","master-addons")),b(7);case 5:return e.a(2)}},e,null,[[0,4]])}));return function(){return e.apply(this,arguments)}}(),J=function(){var e=Ie(ke().m(function e(){var t,n,r,a;return ke().w(function(e){for(;;)switch(e.p=e.n){case 0:t=2,e.p=1,n=0;case 2:if(!(n<=3)){e.n=6;break}if(b(r=t+n),r!==t+1){e.n=4;break}return e.n=3,W(i);case 3:a=e.v,B([a]);case 4:if(!(n<3)){e.n=5;break}return e.n=5,new Promise(function(e){return setTimeout(e,800)});case 5:n++,e.n=2;break;case 6:b(6),w(!0),l&&M[0]&&l(M[0]),e.n=8;break;case 7:throw e.p=7,e.v;case 8:return e.a(2)}},e,null,[[1,7]])}));return function(){return e.apply(this,arguments)}}(),z=function(){var e=Ie(ke().m(function e(){var t,n,r,a;return ke().w(function(e){for(;;)switch(e.p=e.n){case 0:b(1),F({current:0,total:R,currentTemplate:null}),t=[],e.p=1,n=0;case 2:if(!(n<G.length)){e.n=5;break}return r=G[n],F({current:n+1,total:R,currentTemplate:r.title||r.kit_name}),0===n?b(1):n<Math.floor(.5*R)?b(2):n<Math.floor(.8*R)?b(3):b(4),e.n=3,W(r);case 3:if(a=e.v,t.push(a),!(n<G.length-1)){e.n=4;break}return e.n=4,new Promise(function(e){return setTimeout(e,500)});case 4:n++,e.n=2;break;case 5:B(t),b(6),w(!0),l&&l(t),e.n=7;break;case 6:throw e.p=6,e.v;case 7:return e.a(2)}},e,null,[[1,6]])}));return function(){return e.apply(this,arguments)}}(),W=function(){var e=Ie(ke().m(function e(t){var n,r,o,i,l;return ke().w(function(e){for(;;)switch(e.n){case 0:return(n=new FormData).append("action","jltma_import_templates_kit"),n.append("_wpnonce",h),s&&n.append("parentTemplate",s.kit_id||s),"object"===we(t)?(r={template_id:t.template_id||t.id||"",source:"master-api",title:t.title||"Imported Template",type:t.type||"page",content:t.content||null},n.append("template",JSON.stringify(r)),t.page_name&&n.append("page_name",t.page_name)):n.append("template_id",t),e.n=1,fetch(v,{method:"POST",body:n});case 1:return o=e.v,e.n=2,o.json();case 2:if((i=e.v).success){e.n=3;break}throw new Error((null===(l=i.data)||void 0===l?void 0:l.message)||(0,a.__)("Import failed","master-addons"));case 3:return e.a(2,i.data)}},e)}));return function(t){return e.apply(this,arguments)}}(),V=function(){g>=1&&g<=5||(b(0),w(!1),N(null),B([]),F({current:0,total:0,currentTemplate:null}),n())};return t?(0,o.jsxs)("div",{className:"jltma-page-import-modal template-library-mode",children:[(0,o.jsx)("div",{className:"modal-overlay",onClick:0===g||g>=6?V:null}),(0,o.jsxs)("div",{className:"modal-content",children:[_&&6===g&&(0,o.jsx)("div",{className:"confetti-container",children:Ee(Array(50)).map(function(e,t){return(0,o.jsx)("div",{className:"confetti-piece",style:{left:"".concat(100*Math.random(),"%"),animationDelay:"".concat(3*Math.random(),"s"),backgroundColor:["#6814cd","#F50A7F","#4CAF50","#FFC107","#2196F3"][Math.floor(5*Math.random())]}},t)})}),!1,g>=1&&g<=5&&(0,o.jsxs)("div",{className:"import-progress-container",children:[(0,o.jsx)("h2",{children:p?(0,a.sprintf)((0,a.__)("Importing %s Kit","master-addons"),(null==s?void 0:s.kit_name)||"Template"):(0,a.__)("Importing Template","master-addons")}),(0,o.jsx)("p",{className:"import-progress-description",children:p&&A.total>0?(0,a.sprintf)((0,a.__)("Template %d of %d: %s","master-addons"),A.current,A.total,A.currentTemplate||""):(0,a.__)("Please wait while we import your template...","master-addons")}),(0,o.jsx)("div",{className:"vertical-progress-steps",children:q.map(function(e,t){var n=t+1,r=g>e.id,i=g===e.id,s=g<e.id;return(0,o.jsxs)("div",{className:"progress-step ".concat(r?"completed":""," ").concat(i?"current":""," ").concat(s?"pending":""),children:[(0,o.jsxs)("div",{className:"step-indicator-icon",children:[r&&(0,o.jsx)("span",{className:"dashicons dashicons-yes-alt checkmark"}),i&&(0,o.jsx)("span",{className:"dashicons ".concat(e.icon," spinning")}),s&&(0,o.jsx)("span",{className:"step-number",children:n})]}),(0,o.jsxs)("div",{className:"step-content",children:[(0,o.jsx)("div",{className:"step-title",children:e.shortTitle}),i&&(0,o.jsx)("div",{className:"step-status",children:(0,a.__)("In progress...","master-addons")}),r&&(0,o.jsx)("div",{className:"step-status completed",children:(0,a.__)("Completed","master-addons")})]})]},e.id)})}),p&&(0,o.jsx)("div",{className:"progress-bar",children:(0,o.jsx)("div",{className:"progress-bar-fill",style:{width:"".concat(A.current/A.total*100,"%")}})}),(0,o.jsxs)("div",{className:"import-warning",children:[(0,o.jsx)("span",{className:"dashicons dashicons-info"}),(0,o.jsx)("p",{children:(0,a.__)("Please do not close this window while importing...","master-addons")})]})]}),6===g&&(0,o.jsxs)("div",{className:"jltma-import-success-container import-success-container",children:[(0,o.jsx)("button",{className:"modal-close-btn",onClick:V,"aria-label":(0,a.__)("Close","master-addons"),children:(0,o.jsx)("span",{className:"dashicons dashicons-no-alt"})}),(0,o.jsxs)("h2",{children:[(0,a.__)("Congrats, it's Party Time !!!","master-addons")," "]}),(0,o.jsx)("p",{children:p?(0,a.sprintf)((0,a.__)("Successfully imported %d templates from %s","master-addons"),M.length,(null==s?void 0:s.kit_name)||"the kit"):(0,a.__)("Your page is successfully imported and ready to use.","master-addons")}),(0,o.jsx)("div",{className:"jltma-success-illustration success-illustration",children:(0,o.jsxs)("svg",{viewBox:"0 0 200 240",xmlns:"http://www.w3.org/2000/svg",children:[(0,o.jsxs)("defs",{children:[(0,o.jsxs)("linearGradient",{id:"rocketGradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[(0,o.jsx)("stop",{offset:"0%",style:{stopColor:"#6814cd",stopOpacity:1}}),(0,o.jsx)("stop",{offset:"100%",style:{stopColor:"#9d4edd",stopOpacity:1}})]}),(0,o.jsxs)("linearGradient",{id:"flameGradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[(0,o.jsx)("stop",{offset:"0%",style:{stopColor:"#F50A7F",stopOpacity:1}}),(0,o.jsx)("stop",{offset:"100%",style:{stopColor:"#ff6b9d",stopOpacity:1}})]})]}),(0,o.jsx)("circle",{cx:"40",cy:"30",r:"2",fill:"#c4b5fd",opacity:"0.5",children:(0,o.jsx)("animate",{attributeName:"opacity",values:"0.3;1;0.3",dur:"2s",repeatCount:"indefinite"})}),(0,o.jsx)("circle",{cx:"160",cy:"50",r:"2",fill:"#c4b5fd",opacity:"0.5",children:(0,o.jsx)("animate",{attributeName:"opacity",values:"0.6;1;0.6",dur:"2.5s",repeatCount:"indefinite"})}),(0,o.jsx)("circle",{cx:"30",cy:"90",r:"2",fill:"#c4b5fd",opacity:"0.5",children:(0,o.jsx)("animate",{attributeName:"opacity",values:"0.4;1;0.4",dur:"3s",repeatCount:"indefinite"})}),(0,o.jsx)("circle",{cx:"170",cy:"100",r:"2",fill:"#c4b5fd",opacity:"0.5",children:(0,o.jsx)("animate",{attributeName:"opacity",values:"0.5;1;0.5",dur:"2.2s",repeatCount:"indefinite"})}),(0,o.jsx)("ellipse",{cx:"100",cy:"228",rx:"45",ry:"8",fill:"#e9d5ff",opacity:"0.4"}),(0,o.jsxs)("g",{children:[(0,o.jsx)("ellipse",{cx:"90",cy:"195",rx:"6",ry:"12",fill:"url(#flameGradient)",opacity:"0.8",children:(0,o.jsx)("animate",{attributeName:"ry",values:"12;16;12",dur:"0.3s",repeatCount:"indefinite"})}),(0,o.jsx)("ellipse",{cx:"100",cy:"195",rx:"8",ry:"15",fill:"url(#flameGradient)",opacity:"0.9",children:(0,o.jsx)("animate",{attributeName:"ry",values:"15;20;15",dur:"0.3s",repeatCount:"indefinite"})}),(0,o.jsx)("ellipse",{cx:"110",cy:"195",rx:"6",ry:"12",fill:"url(#flameGradient)",opacity:"0.8",children:(0,o.jsx)("animate",{attributeName:"ry",values:"12;16;12",dur:"0.3s",repeatCount:"indefinite"})}),(0,o.jsx)("path",{d:"M 100 40 L 88 160 L 88 180 L 112 180 L 112 160 Z",fill:"url(#rocketGradient)",stroke:"#4c1d95",strokeWidth:"2"}),(0,o.jsx)("path",{d:"M 100 40 L 88 95 L 112 95 Z",fill:"#F50A7F",stroke:"#c2185b",strokeWidth:"2"}),(0,o.jsx)("circle",{cx:"100",cy:"110",r:"14",fill:"#ffffff",opacity:"0.9"}),(0,o.jsx)("circle",{cx:"100",cy:"110",r:"11",fill:"#e0f2fe",opacity:"0.8"}),(0,o.jsx)("circle",{cx:"103",cy:"107",r:"4",fill:"#ffffff",opacity:"0.6"}),(0,o.jsx)("path",{d:"M 88 160 L 72 185 L 88 178 Z",fill:"#9d4edd",stroke:"#7c3aed",strokeWidth:"1.5"}),(0,o.jsx)("path",{d:"M 112 160 L 128 185 L 112 178 Z",fill:"#9d4edd",stroke:"#7c3aed",strokeWidth:"1.5"}),(0,o.jsx)("rect",{x:"92",y:"135",width:"16",height:"2.5",fill:"#c4b5fd",rx:"1"}),(0,o.jsx)("rect",{x:"92",y:"145",width:"16",height:"2.5",fill:"#c4b5fd",rx:"1"})]}),(0,o.jsxs)("ellipse",{cx:"90",cy:"210",rx:"18",ry:"8",fill:"#e9d5ff",opacity:"0.3",children:[(0,o.jsx)("animate",{attributeName:"rx",values:"18;22;18",dur:"1s",repeatCount:"indefinite"}),(0,o.jsx)("animate",{attributeName:"opacity",values:"0.3;0.1;0.3",dur:"1s",repeatCount:"indefinite"})]}),(0,o.jsxs)("ellipse",{cx:"110",cy:"210",rx:"18",ry:"8",fill:"#e9d5ff",opacity:"0.3",children:[(0,o.jsx)("animate",{attributeName:"rx",values:"18;22;18",dur:"1.2s",repeatCount:"indefinite"}),(0,o.jsx)("animate",{attributeName:"opacity",values:"0.3;0.1;0.3",dur:"1.2s",repeatCount:"indefinite"})]})]})}),(0,o.jsxs)("div",{className:"jltma-success-actions success-actions",children:[1===M.length&&M[0].edit_url&&(0,o.jsxs)("div",{className:"success-actions-wrap",children:[(0,o.jsxs)("button",{className:"button button-primary button-edit-elementor",onClick:function(){return window.open(M[0].edit_url,"_blank")},children:[(0,o.jsx)("span",{className:"ma-icon-wrapper",children:(0,o.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,o.jsx)("circle",{cx:"12",cy:"12",r:"12",fill:"#6814cd"}),(0,o.jsx)("text",{x:"12",y:"17",fontSize:"14",fontWeight:"700",fill:"white",textAnchor:"middle",fontFamily:"system-ui, -apple-system, sans-serif",children:"M"})]})}),(0,a.__)("EDIT WITH ELEMENTOR","master-addons")]}),M[0].view_url&&(0,o.jsx)("button",{className:"button button-primary button-go-page",onClick:function(){return window.open(M[0].view_url,"_blank")},children:(0,a.__)("VIEW PAGE","master-addons")})]}),(0,o.jsx)("button",{className:"button button-link",onClick:V,children:(0,a.__)("Go to Template Kits Library","master-addons")})]})]}),7===g&&(0,o.jsxs)("div",{className:"jltma-import-error-container import-error-container",children:[(0,o.jsx)("div",{className:"jltma-error-icon error-icon",children:(0,o.jsx)("span",{className:"dashicons dashicons-warning"})}),(0,o.jsx)("h2",{children:(0,a.__)("Import Failed","master-addons")}),(0,o.jsx)("p",{children:k}),(0,o.jsx)("div",{className:"jltma-error-actions error-actions",children:(0,o.jsxs)("button",{className:"button",onClick:V,children:[(0,o.jsx)("span",{className:"dashicons dashicons-arrow-left-alt2"}),(0,a.__)("Go Back","master-addons")]})})]})]})]}):null};const Be=function(e){e.templates;var t,n,r=e.loading,i=e.selectedTemplate,s=e.activeDevice,l=void 0===s?"desktop":s,c=(null==i||null===(t=i.template)||void 0===t?void 0:t.preview_url)||(null==i?void 0:i.preview_url)||null;return(0,o.jsx)("div",{className:"template-preview-container",style:function(e){var t={};switch(e){case"tablet":case"mobile":t.height="calc(100vh - 101px)",t.margin="20px",t.overflowY="auto";break;default:t.height="calc(100vh - 61px)",t.margin="0",t.overflowY="hidden"}return t}(l),children:r?(0,o.jsxs)("div",{className:"template-preview-loading",children:[(0,o.jsx)("span",{className:"spinner is-active"}),(0,o.jsx)("p",{children:(0,a.__)("Loading preview...","master-addons")})]}):(0,o.jsx)(o.Fragment,{children:c?(0,o.jsxs)("div",{className:"template-preview-iframe-wrapper",style:{position:"relative",width:{desktop:"100%",tablet:"768px",mobile:"375px"}[l],margin:"0 auto",transition:"width 0.3s ease"},children:[(0,o.jsxs)("div",{className:"jltma-template-viewport",children:["tablet"===l&&(0,o.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 430 595",className:"devices-elementor-svg",children:[(0,o.jsx)("rect",{className:"back-shape frame",fill:"#000000",x:"0",y:"0",width:"430",height:"595",rx:"20",ry:"20","vector-effect":"non-scaling-stroke"}),(0,o.jsx)("circle",{className:"overlay-shape home-button",fill:"#242424",cx:"215",cy:"574",r:"10","vector-effect":"non-scaling-stroke"}),(0,o.jsx)("circle",{className:"overlay-shape camera",fill:"#242424",cx:"211",cy:"20",r:"4","vector-effect":"non-scaling-stroke"})]}),"mobile"===l&&(0,o.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 277 574",className:"devices-elementor-svg",children:[(0,o.jsx)("rect",{className:"back-shape frame",fill:"#000000",x:"3",y:"0",width:"271",height:"574",rx:"35",ry:"35","vector-effect":"non-scaling-stroke"}),(0,o.jsx)("circle",{className:"overlay-shape home-button",fill:"#242424",cx:"139",cy:"538",r:"20","vector-effect":"non-scaling-stroke"}),(0,o.jsx)("circle",{className:"overlay-shape camera",fill:"#242424",cx:"95",cy:"37",r:"4","vector-effect":"non-scaling-stroke"}),(0,o.jsx)("rect",{className:"overlay-shape speaker",fill:"#242424",x:"116",y:"35",width:"45",height:"5",rx:"4.5","vector-effect":"non-scaling-stroke"}),(0,o.jsx)("rect",{className:"side-shape button-sound",fill:"#000000",x:"1",y:"71",width:"2",height:"18","vector-effect":"non-scaling-stroke"}),(0,o.jsx)("rect",{className:"side-shape button-plus",fill:"#000000",x:"0",y:"120",width:"3",height:"32","vector-effect":"non-scaling-stroke"}),(0,o.jsx)("rect",{className:"side-shape button-minus",fill:"#000000",x:"0",y:"163",width:"3",height:"32","vector-effect":"non-scaling-stroke"}),(0,o.jsx)("rect",{className:"side-shape color-normal button-on",fill:"#000000",x:"274",y:"120",width:"3",height:"32","vector-effect":"non-scaling-stroke"})]})]}),(0,o.jsx)("iframe",{src:c,width:"100%",height:"100%",style:function(e){var t={};switch(e){case"tablet":t={position:"absolute",top:"70px",left:"50%",transform:"translateX(-50%)",width:"96%",height:"920px",borderRadius:"8px"};break;case"mobile":t={position:"absolute",top:"72px",left:"50%",transform:"translateX(-50%)",width:"92%",height:"620px",borderRadius:"8px"};break;default:t={position:"relative",top:"0",left:"0",transform:"translateX(0)",width:"100%",height:"100%",borderRadius:"0"}}return t}(l),title:(0,a.__)("Template Preview","master-addons")})]}):(0,o.jsx)(o.Fragment,{children:i&&null!=i&&i.thumbnail?(0,o.jsx)("img",{src:i.thumbnail,alt:i.title}):(0,o.jsx)("img",{src:(null===(n=window.JLTMATemplateLibrary)||void 0===n?void 0:n.pluginUrl)+"/assets/images/placeholder.png",alt:"preview image"})})})})};function Ge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Re(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ge(Object(n),!0).forEach(function(t){De(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ge(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function De(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Ue(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ue(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ue(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ke(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,r,a,o){var l=r&&r.prototype instanceof s?r:s,c=Object.create(l.prototype);return qe(c,"_invoke",function(n,r,a){var o,s,l,c=0,u=a||[],d=!1,p={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return o=t,s=0,l=e,p.n=n,i}};function f(n,r){for(s=n,l=r,t=0;!d&&c&&!a&&t<u.length;t++){var a,o=u[t],f=p.p,m=o[2];n>3?(a=m===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=f&&((a=n<2&&f<o[1])?(s=0,p.v=r,p.n=o[1]):f<m&&(a=n<3||o[0]>r||r>m)&&(o[4]=n,o[5]=r,p.n=m,s=0))}if(a||n>1)return i;throw d=!0,r}return function(a,u,m){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&f(u,m),s=u,l=m;(t=s<2?e:l)||!d;){o||(s?s<3?(s>1&&(p.n=-1),f(s,l)):p.n=l:p.v=l);try{if(c=2,o){if(s||(a="next"),t=o[a]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),s=1);o=e}else if((t=(d=p.n<0)?l:n.call(r,p))!==i)break}catch(t){o=e,s=1,l=t}finally{c=1}}return{value:t,done:d}}}(n,a,o),!0),c}var i={};function s(){}function l(){}function c(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(qe(t={},r,function(){return this}),t),d=c.prototype=s.prototype=Object.create(u);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,qe(e,a,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=c,qe(d,"constructor",c),qe(c,"constructor",l),l.displayName="GeneratorFunction",qe(c,a,"GeneratorFunction"),qe(d),qe(d,a,"Generator"),qe(d,r,function(){return this}),qe(d,"toString",function(){return"[object Generator]"}),(Ke=function(){return{w:o,m:p}})()}function qe(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}qe=function(e,t,n,r){function o(t,n){qe(e,t,function(e){return this._invoke(t,n,e)})}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(o("next",0),o("throw",1),o("return",2))},qe(e,t,n,r)}function Ue(e){return Ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ue(e)}function $e(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function Je(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){$e(o,r,a,i,s,"next",e)}function s(e){$e(o,r,a,i,s,"throw",e)}i(void 0)})}}function ze(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw a}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return We(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?We(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function We(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Ve=function(e){var t,n,r,o,i,s,l,c,u;return{library:{ajaxActions:{getTemplates:"jltma_get_templates",getCategories:"jltma_get_categories",importTemplate:"jltma_import_template",previewTemplate:"jltma_preview_template",refreshCache:"jltma_refresh_templates_cache"},tabs:[{id:"master_pages",label:(0,a.__)("Pages","master-addons"),icon:"dashicons-admin-page"},{id:"master_section",label:(0,a.__)("Sections","master-addons"),icon:"dashicons-layout"},{id:"master_footers",label:(0,a.__)("Footer","master-addons"),icon:"dashicons-table-row-after"},{id:"master_headers",label:(0,a.__)("Headers","master-addons"),icon:"dashicons-table-row-before"}],showTabs:!0,nonce:null===(t=window.JLTMATemplateLibrary)||void 0===t?void 0:t.nonce,ajaxurl:null===(n=window.JLTMATemplateLibrary)||void 0===n?void 0:n.ajaxurl,strings:(null===(r=window.JLTMATemplateLibrary)||void 0===r?void 0:r.strings)||{}},kits:{ajaxActions:{getTemplates:"jltma_get_kit_templates_unified",getCategories:"jltma_get_kit_categories",importTemplate:"jltma_import_templates_kit",previewTemplate:"jltma_preview_template",openTemplate:"jltma_open_template",refreshCache:"jltma_refresh_template_kit_cache",installPlugin:"jltma_install_required_plugin",activatePlugin:"jltma_activate_required_plugin"},showTabs:!1,nonce:(null===(o=window.JLTMATemplatesKit)||void 0===o?void 0:o.nonce)||(null===(i=window.JLTMATemplateLibrary)||void 0===i?void 0:i.nonce),ajaxurl:(null===(s=window.JLTMATemplatesKit)||void 0===s?void 0:s.ajaxurl)||(null===(l=window.JLTMATemplateLibrary)||void 0===l?void 0:l.ajaxurl),strings:(null===(c=window.JLTMATemplatesKit)||void 0===c?void 0:c.strings)||(null===(u=window.JLTMATemplateLibrary)||void 0===u?void 0:u.strings)||{}}}[e]||Ve("library").library};const He=function(e){var t,n=e.mode,i=void 0===n?"library":n,s=!0===window.JLTMA_IS_PAGE_IMPORTER_MODE,l=ze((0,r.useState)({templates:[],categories:[],totalTemplates:0,pagination:null,templateCounts:{}}),2),c=l[0],u=l[1],d=ze((0,r.useState)({loading:!0,loadingPage:!1,refreshing:!1,isImporting:{}}),2),p=d[0],f=d[1],m=ze((0,r.useState)({activeCategory:"all",searchTerm:"",currentPage:1,activeTab:"master_section",parentTemplate:null,showFavoritesOnly:!1}),2),h=m[0],v=m[1],y=ze((0,r.useState)(!1),2),g=y[0],b=y[1],j=ze((0,r.useState)(null),2),_=j[0],w=j[1],x=ze((0,r.useState)({}),2),k=x[0],N=x[1],T=ze((0,r.useState)(!1),2),S=T[0],O=T[1],C=ze((0,r.useState)({}),2),P=(C[0],C[1],ze((0,r.useState)("all"),2)),I=P[0],E=P[1],A=ze((0,r.useState)(null),2),L=A[0],M=A[1],B=ze((0,r.useState)(null),2),G=B[0],R=B[1],D=ze((0,r.useState)({isOpen:!1,templateData:null,parentTemplate:null,isFullKitImport:!1,requiredPlugins:[]}),2),K=D[0],q=D[1],U=(0,r.useMemo)(function(){return Ve(i)},[i]),$=(0,r.useCallback)(function(){var e=Je(Ke().m(function e(t){var n,r,a,o=arguments;return Ke().w(function(e){for(;;)switch(e.n){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},(r=new FormData).append("action",U.ajaxActions[t]),r.append("_wpnonce",U.nonce),Object.entries(n).forEach(function(e){var t=ze(e,2),n=t[0],a=t[1];r.append(n,"object"===Ue(a)?JSON.stringify(a):a)}),e.n=1,fetch(U.ajaxurl,{method:"POST",body:r});case 1:return a=e.v,e.a(2,a.json())}},e)}));return function(t){return e.apply(this,arguments)}}(),[U]),z=(0,r.useCallback)(Je(Ke().m(function e(){var t,n,r;return Ke().w(function(e){for(;;)switch(e.p=e.n){case 0:return f(function(e){return Re(Re({},e),{},{loading:!0})}),e.p=1,t={category:h.activeCategory,search:h.searchTerm,page:h.showFavoritesOnly?1:h.currentPage,per_page:h.showFavoritesOnly?999:void 0},"library"===i&&(t.tab=h.activeTab),e.n=2,$("getTemplates",t);case 2:(n=e.v).success&&u(function(e){var t,r;return Re(Re({},e),{},{templates:n.data.templates||[],totalTemplates:(null===(t=n.data.pagination)||void 0===t?void 0:t.total_items)||(null===(r=n.data.templates)||void 0===r?void 0:r.length)||0,pagination:n.data.pagination||null})}),e.n=4;break;case 3:e.p=3,r=e.v,console.error("Error loading templates:",r);case 4:return e.p=4,f(function(e){return Re(Re({},e),{},{loading:!1,loadingPage:!1})}),e.f(4);case 5:return e.a(2)}},e,null,[[1,3,4,5]])})),[h,i,$]),W=(0,r.useCallback)(Je(Ke().m(function e(){var t,n,r,a;return Ke().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,t="library"===i?{tab:h.activeTab}:{},e.n=1,$("getCategories",t);case 1:(n=e.v).success&&(r=Array.isArray(n.data)?n.data:[],u(function(e){return Re(Re({},e),{},{categories:r})})),e.n=3;break;case 2:e.p=2,a=e.v,console.error("Error loading categories:",a);case 3:return e.a(2)}},e,null,[[0,2]])})),[h.activeTab,i,$]),V=(0,r.useCallback)(Je(Ke().m(function e(){var t,n;return Ke().w(function(e){for(;;)switch(e.n){case 0:if("library"===i){e.n=1;break}return e.a(2);case 1:return t={},n=["master_pages","master_section","master_footers","master_headers"],e.n=2,Promise.all(n.map(function(){var e=Je(Ke().m(function e(n){var r,a,o;return Ke().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,$("getTemplates",{tab:n,page:1,category:"all"});case 1:(r=e.v).success&&(t[n]=(null===(a=r.data.pagination)||void 0===a?void 0:a.total_items)||(null===(o=r.data.templates)||void 0===o?void 0:o.length)||0),e.n=3;break;case 2:e.p=2,e.v,t[n]=0;case 3:return e.a(2)}},e,null,[[0,2]])}));return function(t){return e.apply(this,arguments)}}()));case 2:u(function(e){return Re(Re({},e),{},{templateCounts:t})});case 3:return e.a(2)}},e)})),[i,$]);(0,r.useEffect)(function(){var e=function(){var e=Je(Ke().m(function e(){var t;return Ke().w(function(e){for(;;)switch(e.n){case 0:if("kits"!==i){e.n=1;break}return e.n=1,W();case 1:1==(null===(t=window.JLTMATemplatesKit)||void 0===t?void 0:t.is_pro)&&b(!0);case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}();e()},[i,W]),(0,r.useEffect)(function(){h.parentTemplate||z()},[h.activeTab,h.activeCategory,h.searchTerm,h.currentPage,h.showFavoritesOnly,i,z,h.parentTemplate]),(0,r.useEffect)(function(){"library"===i&&h.activeTab&&!h.parentTemplate&&(W(),z(),V(),v(function(e){return Re(Re({},e),{},{activeCategory:"all",currentPage:1})}))},[h.activeTab,i,h.parentTemplate,W,z,V]),(0,r.useEffect)(function(){"kits"===i&&h.parentTemplate&&be.length>0&&!L&&M(be[0])},[i,h.parentTemplate,be,L]);var H=(0,r.useCallback)(function(e){v(function(t){return Re(Re({},t),{},{activeTab:e,searchTerm:""})})},[]),Z=(0,r.useCallback)(function(e){v(function(t){return Re(Re({},t),{},{activeCategory:e,currentPage:1,searchTerm:""})}),"kits"===i&&h.parentTemplate&&ae()},[i,h.parentTemplate]),X=(0,r.useCallback)(function(e){v(function(t){return Re(Re({},t),{},{searchTerm:e,currentPage:1})})},[]),Q=(0,r.useCallback)(function(e){e!==h.currentPage&&(f(function(e){return Re(Re({},e),{},{loadingPage:!0})}),v(function(t){return Re(Re({},t),{},{currentPage:e})}))},[h.currentPage]),ee=(0,r.useCallback)(function(){var e=Je(Ke().m(function e(t,n){return Ke().w(function(e){for(;;)switch(e.n){case 0:if("kits"!==i){e.n=1;break}return q({isOpen:!0,templateData:t,parentTemplate:n||h.parentTemplate,isFullKitImport:!1,requiredPlugins:[]}),e.a(2,!0);case 1:return e.a(2)}},e)}));return function(t,n){return e.apply(this,arguments)}}(),[i,h.activeTab,$,U,h.parentTemplate]),te=(0,r.useCallback)(function(){var e=Je(Ke().m(function e(t){var n,r;return Ke().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,$("previewTemplate",{template_id:t,mode:i});case 1:(n=e.v).success&&n.data.preview_url&&window.open(n.data.preview_url,"_blank"),e.n=3;break;case 2:e.p=2,r=e.v,console.error("Error previewing template:",r);case 3:return e.a(2)}},e,null,[[0,2]])}));return function(t){return e.apply(this,arguments)}}(),[i,$]),ne=(0,r.useCallback)(function(){var e=Je(Ke().m(function e(t,n){var r,a,o,i,l,c,d;return Ke().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,$("openTemplate",{template_id:t.kit_id.split("-").slice(-1)[0],template_category:n});case 1:(r=e.v).success&&(a=r.data.data,o=a.templates||a||[],i=a.required_plugins||[],l=o,s&&(l=Array.isArray(o)?o.filter(function(e){var t,n;return!(null!==(t=e.title)&&void 0!==t&&t.includes("Global Style")||null!==(n=e.title)&&void 0!==n&&n.includes("Global Kit Style"))}):[]),u(function(e){return Re(Re({},e),{},{templates:l})}),v(function(e){return Re(Re({},e),{},{parentTemplate:t,parentTemplateCategory:n})}),(c=l[0]||null)&&M(c),R(i)),e.n=3;break;case 2:e.p=2,d=e.v,console.error("Error opening template kit:",d);case 3:return e.a(2)}},e,null,[[0,2]])}));return function(t,n){return e.apply(this,arguments)}}(),[$]),re=(0,r.useCallback)(Je(Ke().m(function e(){var t,n,r;return Ke().w(function(e){for(;;)switch(e.p=e.n){case 0:return f(function(e){return Re(Re({},e),{},{refreshing:!0})}),e.p=1,e.n=2,$("refreshCache");case 2:if(!(t=e.v).success){e.n=4;break}return e.n=3,Promise.all([W(),z()]);case 3:alert((0,a.__)("Cache refreshed successfully!","master-addons")),e.n=5;break;case 4:alert((null===(n=t.data)||void 0===n?void 0:n.message)||(0,a.__)("Failed to refresh cache","master-addons"));case 5:e.n=7;break;case 6:e.p=6,r=e.v,console.error("Error refreshing cache:",r),alert((0,a.__)("Error refreshing cache","master-addons"));case 7:return e.p=7,f(function(e){return Re(Re({},e),{},{refreshing:!1})}),e.f(7);case 8:return e.a(2)}},e,null,[[1,6,7,8]])})),[$,W,z]),ae=(0,r.useCallback)(function(){v(function(e){return Re(Re({},e),{},{parentTemplate:null})}),z()},[z]),oe=(0,r.useCallback)(Je(Ke().m(function e(){var t,n,r;return Ke().w(function(e){for(;;)switch(e.n){case 0:if(h.parentTemplate){e.n=1;break}return e.a(2);case 1:if(0!==(n=c.templates.filter(function(e){return e&&e.template_id})).length){e.n=2;break}return alert((0,a.__)("No templates found in this kit","master-addons")),e.a(2);case 2:r=(null===(t=h.parentTemplate)||void 0===t?void 0:t.required_plugins)||[],s||(r=[]),q({isOpen:!0,templateData:n,parentTemplate:h.parentTemplate,isFullKitImport:!0,requiredPlugins:r});case 3:return e.a(2)}},e)})),[h.parentTemplate,c.templates]),ie=(0,r.useCallback)(function(e){v(function(t){return Re(Re({},t),{},{showFavoritesOnly:e,currentPage:1})})},[]),le=(0,r.useCallback)(function(){var e=Je(Ke().m(function e(t){var n,r,a,o,i,s=arguments;return Ke().w(function(e){for(;;)switch(e.p=e.n){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],w(t.slug),e.p=1,e.n=2,$("installPlugin",{plugin_slug:t.slug,plugin_name:t.name,plugin_file:t.plugin_file||""});case 2:if(!(r=e.v).success){e.n=3;break}N(function(e){return Re(Re({},e),{},De({},t.slug,{is_installed:!0,is_active:r.data.is_active||!1}))}),!n&&window.swal&&window.swal({title:"Installation Successful",text:r.data.message||"".concat(t.name," installed successfully!"),icon:"success",confirmButtonColor:"#3085d6",confirmButtonText:"Great!"}),e.n=4;break;case 3:if(!n&&window.swal&&("Plugin not found."===r.data.details?window.swal({title:"Installation Failed",text:"".concat(t.name," is not found on wordpress directory, Please install manually"),icon:"error",confirmButtonColor:"#d33",confirmButtonText:"OK"}):window.swal({title:"Installation Failed",text:(null===(a=r.data)||void 0===a?void 0:a.message)||"Failed to install ".concat(t.name),icon:"error",confirmButtonColor:"#d33",confirmButtonText:"OK"})),!n){e.n=4;break}throw new Error((null===(o=r.data)||void 0===o?void 0:o.message)||"Failed to install ".concat(t.name));case 4:e.n=7;break;case 5:if(e.p=5,i=e.v,n||!window.swal){e.n=6;break}window.swal({title:"Installation Error",text:"An error occurred during plugin installation: ".concat(i.message),icon:"error",confirmButtonColor:"#d33",confirmButtonText:"OK"}),e.n=7;break;case 6:throw i;case 7:return e.p=7,w(null),e.f(7);case 8:return e.a(2)}},e,null,[[1,5,7,8]])}));return function(t){return e.apply(this,arguments)}}(),[$]),ce=(0,r.useCallback)(function(){var e=Je(Ke().m(function e(t){var n,r,a,o,i,s=arguments;return Ke().w(function(e){for(;;)switch(e.p=e.n){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],w(t.slug),e.p=1,e.n=2,$("activatePlugin",{plugin_slug:t.slug,plugin_file:t.plugin_file});case 2:if(!(r=e.v).success){e.n=3;break}N(function(e){return Re(Re({},e),{},De({},t.slug,Re(Re({},e[t.slug]),{},{is_active:!0})))}),!n&&window.swal&&window.swal({title:"Activation Successful",text:r.data.message||"".concat(t.name," activated successfully!"),icon:"success",confirmButtonColor:"#3085d6",confirmButtonText:"Great!"}),e.n=4;break;case 3:if(!n&&window.swal&&window.swal({title:"Activation Failed",text:(null===(a=r.data)||void 0===a?void 0:a.message)||"Failed to activate ".concat(t.name),icon:"error",confirmButtonColor:"#d33",confirmButtonText:"OK"}),!n){e.n=4;break}throw new Error((null===(o=r.data)||void 0===o?void 0:o.message)||"Failed to activate ".concat(t.name));case 4:e.n=7;break;case 5:if(e.p=5,i=e.v,n||!window.swal){e.n=6;break}window.swal({title:"Activation Error",text:"An error occurred during plugin activation: ".concat(i.message),icon:"error",confirmButtonColor:"#d33",confirmButtonText:"OK"}),e.n=7;break;case 6:throw i;case 7:return e.p=7,w(null),e.f(7);case 8:return e.a(2)}},e,null,[[1,5,7,8]])}));return function(t){return e.apply(this,arguments)}}(),[$]),ue=(0,r.useCallback)(function(e){E(e),v(function(e){return Re(Re({},e),{},{currentPage:1})})},[]),de=(0,r.useCallback)(function(e){M(e)},[]),pe=ze((0,r.useState)("desktop"),2),me=pe[0],he=pe[1],ve=(0,r.useCallback)(function(e){he(e)},[]),ye=(0,r.useMemo)(function(){var e=Array.isArray(c.categories)?c.categories:[];return e.find(function(e){return e.id===h.activeCategory})||e[0]||{name:"kits"===i?"ALL":"All Types"}},[c.categories,h.activeCategory,i]),ge=(0,r.useMemo)(function(){return h.searchTerm?c.totalTemplates:(null==ye?void 0:ye.count)||c.totalTemplates},[h.searchTerm,c.totalTemplates,ye]),be=(0,r.useMemo)(function(){var e=Array.isArray(c.templates)?c.templates:[];if("all"!==I&&(e=e.filter(function(e){return"free"===I?!e.is_pro:"pro"!==I||e.is_pro})),h.showFavoritesOnly)try{var t="kits"===i?"kits":"library",n=JSON.parse(localStorage.getItem("jltma_favorites")||"{}")[t]||[];e=e.filter(function(e){var t=e.id||e.template_id||e.kit_id;return n.includes(t)})}catch(e){console.error("Error loading favorites:",e)}return e},[c.templates,I,h.showFavoritesOnly,i]);return(0,o.jsx)("div",{className:"jltma-templates ".concat("kits"===i?"kits":""),children:(0,o.jsxs)("div",{className:"template-library-content",children:[(0,o.jsx)(fe,{categoryName:ye.name,templateCount:ge,searchTerm:h.searchTerm,onSearchChange:X,onRefresh:re,refreshing:p.refreshing,activeTab:h.activeTab,onTabChange:H,templateCounts:c.templateCounts,showTabs:U.showTabs||"kits"===i&&s,tabs:U.tabs,strings:U.strings,parentTemplate:h.parentTemplate,mode:i,backButtonClick:ae,setIsUploaderOpen:O,categories:Array.isArray(c.categories)?c.categories:[],activeCategory:h.activeCategory,onCategoryChange:Z,isPageImporterMode:s,activeDevice:me,onDeviceChange:ve,nonce:U.nonce,ajaxurl:U.ajaxurl}),(0,o.jsxs)(F,{open:S,setIsOpen:O,className:"template-kit",children:[(0,o.jsxs)("div",{className:"modal-header",children:[(0,o.jsx)("h3",{children:(0,a.__)("Upload Template Kit","master-addons")}),(0,o.jsx)("button",{className:"modal-close",onClick:function(){return O(!1)},"aria-label":(0,a.__)("Close","master-addons"),children:(0,o.jsx)("span",{className:"dashicons dashicons-no-alt"})})]}),(0,o.jsx)("div",{className:"modal-body",children:(0,o.jsx)(_e,{isOpen:!0,onUploadComplete:function(e){z(),O(!1)},nonce:U.nonce,ajaxurl:U.ajaxurl})})]}),"kits"===i&&s?h.parentTemplate?(0,o.jsxs)("div",{className:"page-importer-layout",children:[(0,o.jsx)("div",{className:"page-importer-sidebar",children:(0,o.jsx)(se,{categories:Array.isArray(c.categories)?c.categories:[],activeCategory:h.activeCategory,onCategoryChange:Z,activePlanFilter:I,onPlanFilterChange:ue,onFavoritesFilterChange:ie,mode:i,templates:be,onTemplateSelect:de,onImport:ee,parentTemplate:h.parentTemplate,parentTemplateCategory:h.parentTemplateCategory,requiredPlugins:G})}),(0,o.jsx)("div",{className:"page-importer-content",children:(0,o.jsx)(Be,{templates:be,loading:p.loading,selectedTemplate:L,activeDevice:me})})]}):(0,o.jsxs)("div",{className:"page-importer-layout",children:[(0,o.jsx)("div",{className:"page-importer-sidebar",children:(0,o.jsx)(se,{categories:Array.isArray(c.categories)?c.categories:[],activeCategory:h.activeCategory,onCategoryChange:Z,activePlanFilter:I,onPlanFilterChange:ue,onFavoritesFilterChange:ie,mode:i,templates:[],onTemplateSelect:de})}),(0,o.jsx)("div",{className:"page-importer-content",children:(0,o.jsx)(J,{templates:be,loading:p.loading,onImport:ee,onPreview:te,onOpenKit:ne,pagination:c.pagination,onPageChange:Q,loadingPage:p.loadingPage,mode:i,parentTemplate:h.parentTemplate,isImporting:p.isImporting,isProUser:g,setIsImporting:function(e){return f(function(t){return Re(Re({},t),{},{isImporting:e})})},installingPlugin:_,pluginStatuses:k,setPluginStatuses:N,onInstallPlugin:le,onActivatePlugin:ce,nonce:U.nonce,ajaxurl:U.ajaxurl,backButtonClick:ae})})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(J,{templates:be,loading:p.loading,onImport:ee,onPreview:te,onOpenKit:ne,pagination:c.pagination,onPageChange:Q,loadingPage:p.loadingPage,mode:i,parentTemplate:h.parentTemplate,isImporting:p.isImporting,isProUser:g,setIsImporting:function(e){return f(function(t){return Re(Re({},t),{},{isImporting:e})})},installingPlugin:_,pluginStatuses:k,setPluginStatuses:N,onInstallPlugin:le,onActivatePlugin:ce,nonce:U.nonce,ajaxurl:U.ajaxurl,backButtonClick:ae,requiredPlugins:G}),h.parentTemplate&&(0,o.jsx)(Y,{parentTemplate:h.parentTemplate,mode:i,templates:c.templates,onImport:ee,onFullKitImport:oe,isImporting:p.isImporting,isProUser:g,setIsImporting:function(e){return f(function(t){return Re(Re({},t),{},{isImporting:e})})},installingPlugin:_,pluginStatuses:k,setPluginStatuses:N,onInstallPlugin:le,onActivatePlugin:ce,requiredPlugins:(null===(t=c.templates)||void 0===t?void 0:t.required_plugins)||[]})]}),K.isOpen&&(0,o.jsx)(Me,{isOpen:K.isOpen,templateData:K.templateData,parentTemplate:K.parentTemplate,isFullKitImport:K.isFullKitImport,requiredPlugins:K.requiredPlugins,pluginStatuses:k,onInstallPlugin:le,onActivatePlugin:ce,nonce:U.nonce,ajaxurl:U.ajaxurl,onClose:function(){return q({isOpen:!1,templateData:null,parentTemplate:null,isFullKitImport:!1,requiredPlugins:[]})},onImportComplete:function(e){K.isFullKitImport&&z()}})]})})};var Ye=null;function Ze(){var e=document.getElementById("jltma-template-kits-app");return e?(e.innerHTML="",(Ye=(0,r.createRoot)(e)).render((0,r.createElement)(He,{mode:"kits"})),Ye):null}window.JLTMAMountTemplateKits=Ze,document.addEventListener("DOMContentLoaded",function(){window.JLTMA_IS_PAGE_IMPORTER_MODE=!1,Ze()})})();
//# sourceMappingURL=template-kits-app.js.map